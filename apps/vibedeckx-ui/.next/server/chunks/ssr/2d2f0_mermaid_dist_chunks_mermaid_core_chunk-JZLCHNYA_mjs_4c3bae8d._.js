module.exports=[10473,4591,a=>{"use strict";var b=a.i(38700),c=a.i(1540),d=a.i(64332),e=a.i(35757),f=a.i(90742),g=a.i(2697);a.i(43066);var h=a.i(55784);function i(a,b,c){if(a&&a.length){let[d,e]=b,f=Math.PI/180*c,g=Math.cos(f),h=Math.sin(f);for(let b of a){let[a,c]=b;b[0]=(a-d)*g-(c-e)*h+d,b[1]=(a-d)*h+(c-e)*g+e}}}function j(a,b){var c;let d=b.hachureAngle+90,e=b.hachureGap;e<0&&(e=4*b.strokeWidth),e=Math.round(Math.max(e,.1));let f=1;return b.roughness>=1&&((null==(c=b.randomizer)?void 0:c.next())||Math.random())>.7&&(f=e),function(a,b,c,d=1){let e=Math.max(b,.1),f=a[0]&&a[0][0]&&"number"==typeof a[0][0]?[a]:a,g=[0,0];if(c)for(let a of f)i(a,g,c);let h=function(a,b,c){let d=[];for(let b of a){var e,f;let a=[...b];e=a[0],f=a[a.length-1],e[0]===f[0]&&e[1]===f[1]||a.push([a[0][0],a[0][1]]),a.length>2&&d.push(a)}let g=[];b=Math.max(b,.1);let h=[];for(let a of d)for(let b=0;b<a.length-1;b++){let c=a[b],d=a[b+1];if(c[1]!==d[1]){let a=Math.min(c[1],d[1]);h.push({ymin:a,ymax:Math.max(c[1],d[1]),x:a===c[1]?c[0]:d[0],islope:(d[0]-c[0])/(d[1]-c[1])})}}if(h.sort((a,b)=>a.ymin<b.ymin?-1:a.ymin>b.ymin?1:a.x<b.x?-1:a.x>b.x?1:a.ymax===b.ymax?0:(a.ymax-b.ymax)/Math.abs(a.ymax-b.ymax)),!h.length)return g;let i=[],j=h[0].ymin,k=0;for(;i.length||h.length;){if(h.length){let a=-1;for(let b=0;b<h.length&&!(h[b].ymin>j);b++)a=b;h.splice(0,a+1).forEach(a=>{i.push({s:j,edge:a})})}if((i=i.filter(a=>!(a.edge.ymax<=j))).sort((a,b)=>a.edge.x===b.edge.x?0:(a.edge.x-b.edge.x)/Math.abs(a.edge.x-b.edge.x)),(1!==c||k%b==0)&&i.length>1)for(let a=0;a<i.length;a+=2){let b=a+1;if(b>=i.length)break;let c=i[a].edge,d=i[b].edge;g.push([[Math.round(c.x),j],[Math.round(d.x),j]])}j+=c,i.forEach(a=>{a.edge.x=a.edge.x+c*a.edge.islope}),k++}return g}(f,e,d);if(c){let a;for(let a of f)i(a,g,-c);a=[],h.forEach(b=>a.push(...b)),i(a,g,-c)}return h}(a,e,d,f||1)}class k{constructor(a){this.helper=a}fillPolygons(a,b){return this._fillPolygons(a,b)}_fillPolygons(a,b){let c=j(a,b);return{type:"fillSketch",ops:this.renderLines(c,b)}}renderLines(a,b){let c=[];for(let d of a)c.push(...this.helper.doubleLineOps(d[0][0],d[0][1],d[1][0],d[1][1],b));return c}}function l(a){let b=a[0],c=a[1];return Math.sqrt(Math.pow(b[0]-c[0],2)+Math.pow(b[1]-c[1],2))}class m extends k{fillPolygons(a,b){let c=b.hachureGap;c<0&&(c=4*b.strokeWidth);let d=j(a,Object.assign({},b,{hachureGap:c=Math.max(c,.1)})),e=Math.PI/180*b.hachureAngle,f=[],g=.5*c*Math.cos(e),h=.5*c*Math.sin(e);for(let[a,b]of d)l([a,b])&&f.push([[a[0]-g,a[1]+h],[...b]],[[a[0]+g,a[1]-h],[...b]]);return{type:"fillSketch",ops:this.renderLines(f,b)}}}class n extends k{fillPolygons(a,b){let c=this._fillPolygons(a,b),d=Object.assign({},b,{hachureAngle:b.hachureAngle+90}),e=this._fillPolygons(a,d);return c.ops=c.ops.concat(e.ops),c}}class o{constructor(a){this.helper=a}fillPolygons(a,b){let c=j(a,b=Object.assign({},b,{hachureAngle:0}));return this.dotsOnLines(c,b)}dotsOnLines(a,b){let c=[],d=b.hachureGap;d<0&&(d=4*b.strokeWidth),d=Math.max(d,.1);let e=b.fillWeight;e<0&&(e=b.strokeWidth/2);let f=d/4;for(let g of a){let a=l(g),h=Math.ceil(a/d)-1,i=a-h*d,j=(g[0][0]+g[1][0])/2-d/4,k=Math.min(g[0][1],g[1][1]);for(let a=0;a<h;a++){let g=j-f+2*Math.random()*f,h=k+i+a*d-f+2*Math.random()*f,l=this.helper.ellipse(g,h,e,e,b);c.push(...l.ops)}}return{type:"fillSketch",ops:c}}}class p{constructor(a){this.helper=a}fillPolygons(a,b){let c=j(a,b);return{type:"fillSketch",ops:this.dashedLine(c,b)}}dashedLine(a,b){let c=b.dashOffset<0?b.hachureGap<0?4*b.strokeWidth:b.hachureGap:b.dashOffset,d=b.dashGap<0?b.hachureGap<0?4*b.strokeWidth:b.hachureGap:b.dashGap,e=[];return a.forEach(a=>{let f=l(a),g=Math.floor(f/(c+d)),h=(f+d-g*(c+d))/2,i=a[0],j=a[1];i[0]>j[0]&&(i=a[1],j=a[0]);let k=Math.atan((j[1]-i[1])/(j[0]-i[0]));for(let a=0;a<g;a++){let f=a*(c+d),g=f+c,j=[i[0]+f*Math.cos(k)+h*Math.cos(k),i[1]+f*Math.sin(k)+h*Math.sin(k)],l=[i[0]+g*Math.cos(k)+h*Math.cos(k),i[1]+g*Math.sin(k)+h*Math.sin(k)];e.push(...this.helper.doubleLineOps(j[0],j[1],l[0],l[1],b))}}),e}}class q{constructor(a){this.helper=a}fillPolygons(a,b){let c=b.hachureGap<0?4*b.strokeWidth:b.hachureGap,d=b.zigzagOffset<0?c:b.zigzagOffset,e=j(a,b=Object.assign({},b,{hachureGap:c+d}));return{type:"fillSketch",ops:this.zigzagLines(e,d,b)}}zigzagLines(a,b,c){let d=[];return a.forEach(a=>{let e=Math.round(l(a)/(2*b)),f=a[0],g=a[1];f[0]>g[0]&&(f=a[1],g=a[0]);let h=Math.atan((g[1]-f[1])/(g[0]-f[0]));for(let a=0;a<e;a++){let e=2*a*b,g=2*(a+1)*b,i=Math.sqrt(2*Math.pow(b,2)),j=[f[0]+e*Math.cos(h),f[1]+e*Math.sin(h)],k=[f[0]+g*Math.cos(h),f[1]+g*Math.sin(h)],l=[j[0]+i*Math.cos(h+Math.PI/4),j[1]+i*Math.sin(h+Math.PI/4)];d.push(...this.helper.doubleLineOps(j[0],j[1],l[0],l[1],c),...this.helper.doubleLineOps(l[0],l[1],k[0],k[1],c))}}),d}}let r={};class s{constructor(a){this.seed=a}next(){return this.seed?(0x80000000-1&(this.seed=Math.imul(48271,this.seed)))/0x80000000:Math.random()}}let t={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function u(a){let b=[],c=function(a){let b=[];for(;""!==a;)if(a.match(/^([ \t\r\n,]+)/))a=a.substr(RegExp.$1.length);else if(a.match(/^([aAcChHlLmMqQsStTvVzZ])/))b[b.length]={type:0,text:RegExp.$1},a=a.substr(RegExp.$1.length);else{if(!a.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];b[b.length]={type:1,text:`${parseFloat(RegExp.$1)}`},a=a.substr(RegExp.$1.length)}return b[b.length]={type:2,text:""},b}(a),d="BOD",e=0,f=c[0];for(;2!==f.type;){let g=0,h=[];if("BOD"===d){if("M"!==f.text&&"m"!==f.text)return u("M0,0"+a);e++,g=t[f.text],d=f.text}else 1===f.type?g=t[d]:(e++,g=t[f.text],d=f.text);if(!(e+g<c.length))throw Error("Path data ended short");for(let a=e;a<e+g;a++){let b=c[a];if(1!==b.type)throw Error("Param not a number: "+d+","+b.text);h[h.length]=+b.text}if("number"!=typeof t[d])throw Error("Bad segment: "+d);{let a={key:d,data:h};b.push(a),e+=g,f=c[e],"M"===d&&(d="L"),"m"===d&&(d="l")}}return b}function v(a){let b=0,c=0,d=0,e=0,f=[];for(let{key:g,data:h}of a)switch(g){case"M":f.push({key:"M",data:[...h]}),[b,c]=h,[d,e]=h;break;case"m":b+=h[0],c+=h[1],f.push({key:"M",data:[b,c]}),d=b,e=c;break;case"L":f.push({key:"L",data:[...h]}),[b,c]=h;break;case"l":b+=h[0],c+=h[1],f.push({key:"L",data:[b,c]});break;case"C":f.push({key:"C",data:[...h]}),b=h[4],c=h[5];break;case"c":{let a=h.map((a,d)=>d%2?a+c:a+b);f.push({key:"C",data:a}),b=a[4],c=a[5];break}case"Q":f.push({key:"Q",data:[...h]}),b=h[2],c=h[3];break;case"q":{let a=h.map((a,d)=>d%2?a+c:a+b);f.push({key:"Q",data:a}),b=a[2],c=a[3];break}case"A":f.push({key:"A",data:[...h]}),b=h[5],c=h[6];break;case"a":b+=h[5],c+=h[6],f.push({key:"A",data:[h[0],h[1],h[2],h[3],h[4],b,c]});break;case"H":f.push({key:"H",data:[...h]}),b=h[0];break;case"h":b+=h[0],f.push({key:"H",data:[b]});break;case"V":f.push({key:"V",data:[...h]}),c=h[0];break;case"v":c+=h[0],f.push({key:"V",data:[c]});break;case"S":f.push({key:"S",data:[...h]}),b=h[2],c=h[3];break;case"s":{let a=h.map((a,d)=>d%2?a+c:a+b);f.push({key:"S",data:a}),b=a[2],c=a[3];break}case"T":f.push({key:"T",data:[...h]}),b=h[0],c=h[1];break;case"t":b+=h[0],c+=h[1],f.push({key:"T",data:[b,c]});break;case"Z":case"z":f.push({key:"Z",data:[]}),b=d,c=e}return f}function w(a){let b=[],c="",d=0,e=0,f=0,g=0,h=0,i=0;for(let{key:j,data:k}of a){switch(j){case"M":b.push({key:"M",data:[...k]}),[d,e]=k,[f,g]=k;break;case"C":b.push({key:"C",data:[...k]}),d=k[4],e=k[5],h=k[2],i=k[3];break;case"L":b.push({key:"L",data:[...k]}),[d,e]=k;break;case"H":d=k[0],b.push({key:"L",data:[d,e]});break;case"V":e=k[0],b.push({key:"L",data:[d,e]});break;case"S":{let a=0,f=0;"C"===c||"S"===c?(a=d+(d-h),f=e+(e-i)):(a=d,f=e),b.push({key:"C",data:[a,f,...k]}),h=k[0],i=k[1],d=k[2],e=k[3];break}case"T":{let[a,f]=k,g=0,j=0;"Q"===c||"T"===c?(g=d+(d-h),j=e+(e-i)):(g=d,j=e);let l=d+2*(g-d)/3,m=e+2*(j-e)/3,n=a+2*(g-a)/3,o=f+2*(j-f)/3;b.push({key:"C",data:[l,m,n,o,a,f]}),h=g,i=j,d=a,e=f;break}case"Q":{let[a,c,f,g]=k,j=d+2*(a-d)/3,l=e+2*(c-e)/3,m=f+2*(a-f)/3,n=g+2*(c-g)/3;b.push({key:"C",data:[j,l,m,n,f,g]}),h=a,i=c,d=f,e=g;break}case"A":{let a=Math.abs(k[0]),c=Math.abs(k[1]),f=k[2],g=k[3],h=k[4],i=k[5],j=k[6];0===a||0===c?(b.push({key:"C",data:[d,e,i,j,i,j]}),d=i,e=j):(d!==i||e!==j)&&((function a(b,c,d,e,f,g,h,i,j,k){let l=Math.PI*h/180,m=[],n=0,o=0,p=0,q=0;if(k)[n,o,p,q]=k;else{[b,c]=x(b,c,-l),[d,e]=x(d,e,-l);let a=(b-d)/2,h=(c-e)/2,k=a*a/(f*f)+h*h/(g*g);k>1&&(f*=k=Math.sqrt(k),g*=k);let m=f*f,r=g*g,s=(i===j?-1:1)*Math.sqrt(Math.abs((m*r-m*h*h-r*a*a)/(m*h*h+r*a*a)));p=s*f*h/g+(b+d)/2,q=-(s*g)*a/f+(c+e)/2,n=Math.asin(parseFloat(((c-q)/g).toFixed(9))),o=Math.asin(parseFloat(((e-q)/g).toFixed(9))),b<p&&(n=Math.PI-n),d<p&&(o=Math.PI-o),n<0&&(n=2*Math.PI+n),o<0&&(o=2*Math.PI+o),j&&n>o&&(n-=2*Math.PI),!j&&o>n&&(o-=2*Math.PI)}let r=o-n;if(Math.abs(r)>120*Math.PI/180){let b=o,c=d,i=e;m=a(d=p+f*Math.cos(o=j&&o>n?n+120*Math.PI/180*1:n+-(120*Math.PI/180*1)),e=q+g*Math.sin(o),c,i,f,g,h,0,j,[o,b,p,q])}r=o-n;let s=Math.cos(n),t=Math.cos(o),u=Math.tan(r/4),v=4/3*f*u,w=4/3*g*u,y=[b,c],z=[b+v*Math.sin(n),c-w*s],A=[d+v*Math.sin(o),e-w*t],B=[d,e];if(z[0]=2*y[0]-z[0],z[1]=2*y[1]-z[1],k)return[z,A,B].concat(m);{m=[z,A,B].concat(m);let a=[];for(let b=0;b<m.length;b+=3){let c=x(m[b][0],m[b][1],l),d=x(m[b+1][0],m[b+1][1],l),e=x(m[b+2][0],m[b+2][1],l);a.push([c[0],c[1],d[0],d[1],e[0],e[1]])}return a}})(d,e,i,j,a,c,f,g,h).forEach(function(a){b.push({key:"C",data:a})}),d=i,e=j);break}case"Z":b.push({key:"Z",data:[]}),d=f,e=g}c=j}return b}function x(a,b,c){return[a*Math.cos(c)-b*Math.sin(c),a*Math.sin(c)+b*Math.cos(c)]}let y={randOffset:function(a,b){return L(a,b)},randOffsetWithRange:function(a,b,c){return K(a,b,c)},ellipse:function(a,b,c,d,e){let f=C(c,d,e);return D(a,b,e,f).opset},doubleLineOps:function(a,b,c,d,e){return M(a,b,c,d,e,!0)}};function z(a,b,c,d,e){return{type:"path",ops:M(a,b,c,d,e)}}function A(a,b,c){let d=(a||[]).length;if(d>2){let e=[];for(let b=0;b<d-1;b++)e.push(...M(a[b][0],a[b][1],a[b+1][0],a[b+1][1],c));return b&&e.push(...M(a[d-1][0],a[d-1][1],a[0][0],a[0][1],c)),{type:"path",ops:e}}return 2===d?z(a[0][0],a[0][1],a[1][0],a[1][1],c):{type:"path",ops:[]}}function B(a,b){if(a.length){let c="number"==typeof a[0][0]?[a]:a,d=O(c[0],+(1+.2*b.roughness),b),e=b.disableMultiStroke?[]:O(c[0],1.5*(1+.22*b.roughness),I(b));for(let a=1;a<c.length;a++){let f=c[a];if(f.length){let a=O(f,+(1+.2*b.roughness),b),c=b.disableMultiStroke?[]:O(f,1.5*(1+.22*b.roughness),I(b));for(let b of a)"move"!==b.op&&d.push(b);for(let a of c)"move"!==a.op&&e.push(a)}}return{type:"path",ops:d.concat(e)}}return{type:"path",ops:[]}}function C(a,b,c){let d=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(a/2,2)+Math.pow(b/2,2))/2)),e=2*Math.PI/Math.ceil(Math.max(c.curveStepCount,c.curveStepCount/Math.sqrt(200)*d)),f=Math.abs(a/2),g=Math.abs(b/2),h=1-c.curveFitting;return f+=L(f*h,c),g+=L(g*h,c),{increment:e,rx:f,ry:g}}function D(a,b,c,d){let[e,f]=Q(d.increment,a,b,d.rx,d.ry,1,d.increment*K(.1,K(.4,1,c),c),c),g=P(e,null,c);if(!c.disableMultiStroke&&0!==c.roughness){let[e]=Q(d.increment,a,b,d.rx,d.ry,1.5,0,c),f=P(e,null,c);g=g.concat(f)}return{estimatedPoints:f,opset:{type:"path",ops:g}}}function E(a,b,c,d,e,f,g,h,i){let j=Math.abs(c/2),k=Math.abs(d/2);j+=L(.01*j,i),k+=L(.01*k,i);let l=e,m=f;for(;l<0;)l+=2*Math.PI,m+=2*Math.PI;m-l>2*Math.PI&&(l=0,m=2*Math.PI);let n=Math.min(2*Math.PI/i.curveStepCount/2,(m-l)/2),o=R(n,a,b,j,k,l,m,1,i);if(!i.disableMultiStroke){let c=R(n,a,b,j,k,l,m,1.5,i);o.push(...c)}return g&&(h?o.push(...M(a,b,a+j*Math.cos(l),b+k*Math.sin(l),i),...M(a,b,a+j*Math.cos(m),b+k*Math.sin(m),i)):o.push({op:"lineTo",data:[a,b]},{op:"lineTo",data:[a+j*Math.cos(l),b+k*Math.sin(l)]})),{type:"path",ops:o}}function F(a,b){let c=w(v(u(a))),d=[],e=[0,0],f=[0,0];for(let{key:a,data:g}of c)switch(a){case"M":f=[g[0],g[1]],e=[g[0],g[1]];break;case"L":d.push(...M(f[0],f[1],g[0],g[1],b)),f=[g[0],g[1]];break;case"C":{let[a,c,e,h,i,j]=g;d.push(...function(a,b,c,d,e,f,g,h){let i=[],j=[h.maxRandomnessOffset||1,(h.maxRandomnessOffset||1)+.3],k=[0,0],l=h.disableMultiStroke?1:2,m=h.preserveVertices;for(let n=0;n<l;n++)0===n?i.push({op:"move",data:[g[0],g[1]]}):i.push({op:"move",data:[g[0]+(m?0:L(j[0],h)),g[1]+(m?0:L(j[0],h))]}),k=m?[e,f]:[e+L(j[n],h),f+L(j[n],h)],i.push({op:"bcurveTo",data:[a+L(j[n],h),b+L(j[n],h),c+L(j[n],h),d+L(j[n],h),k[0],k[1]]});return i}(a,c,e,h,i,j,f,b)),f=[i,j];break}case"Z":d.push(...M(f[0],f[1],e[0],e[1],b)),f=[e[0],e[1]]}return{type:"path",ops:d}}function G(a,b){let c=[];for(let d of a)if(d.length){let a=b.maxRandomnessOffset||0,e=d.length;if(e>2){c.push({op:"move",data:[d[0][0]+L(a,b),d[0][1]+L(a,b)]});for(let f=1;f<e;f++)c.push({op:"lineTo",data:[d[f][0]+L(a,b),d[f][1]+L(a,b)]})}}return{type:"fillPath",ops:c}}function H(a,b){return(function(a,b){let c=a.fillStyle||"hachure";if(!r[c])switch(c){case"zigzag":r[c]||(r[c]=new m(b));break;case"cross-hatch":r[c]||(r[c]=new n(b));break;case"dots":r[c]||(r[c]=new o(b));break;case"dashed":r[c]||(r[c]=new p(b));break;case"zigzag-line":r[c]||(r[c]=new q(b));break;default:r[c="hachure"]||(r[c]=new k(b))}return r[c]})(b,y).fillPolygons(a,b)}function I(a){let b=Object.assign({},a);return b.randomizer=void 0,a.seed&&(b.seed=a.seed+1),b}function J(a){return a.randomizer||(a.randomizer=new s(a.seed||0)),a.randomizer.next()}function K(a,b,c,d=1){return c.roughness*d*(J(c)*(b-a)+a)}function L(a,b,c=1){return K(-a,a,b,c)}function M(a,b,c,d,e,f=!1){let g=f?e.disableMultiStrokeFill:e.disableMultiStroke,h=N(a,b,c,d,e,!0,!1);if(g)return h;let i=N(a,b,c,d,e,!0,!0);return h.concat(i)}function N(a,b,c,d,e,f,g){let h=Math.pow(a-c,2)+Math.pow(b-d,2),i=Math.sqrt(h),j=1;j=i<200?1:i>500?.4:-.0016668*i+1.233334;let k=e.maxRandomnessOffset||0;k*k*100>h&&(k=i/10);let l=k/2,m=.2+.2*J(e),n=e.bowing*e.maxRandomnessOffset*(d-b)/200,o=e.bowing*e.maxRandomnessOffset*(a-c)/200;n=L(n,e,j),o=L(o,e,j);let p=[],q=e.preserveVertices;return f&&(g?p.push({op:"move",data:[a+(q?0:L(l,e,j)),b+(q?0:L(l,e,j))]}):p.push({op:"move",data:[a+(q?0:L(k,e,j)),b+(q?0:L(k,e,j))]})),g?p.push({op:"bcurveTo",data:[n+a+(c-a)*m+L(l,e,j),o+b+(d-b)*m+L(l,e,j),n+a+2*(c-a)*m+L(l,e,j),o+b+2*(d-b)*m+L(l,e,j),c+(q?0:L(l,e,j)),d+(q?0:L(l,e,j))]}):p.push({op:"bcurveTo",data:[n+a+(c-a)*m+L(k,e,j),o+b+(d-b)*m+L(k,e,j),n+a+2*(c-a)*m+L(k,e,j),o+b+2*(d-b)*m+L(k,e,j),c+(q?0:L(k,e,j)),d+(q?0:L(k,e,j))]}),p}function O(a,b,c){if(!a.length)return[];let d=[];d.push([a[0][0]+L(b,c),a[0][1]+L(b,c)]),d.push([a[0][0]+L(b,c),a[0][1]+L(b,c)]);for(let e=1;e<a.length;e++)d.push([a[e][0]+L(b,c),a[e][1]+L(b,c)]),e===a.length-1&&d.push([a[e][0]+L(b,c),a[e][1]+L(b,c)]);return P(d,null,c)}function P(a,b,c){let d=a.length,e=[];if(d>3){let f=[],g=1-c.curveTightness;e.push({op:"move",data:[a[1][0],a[1][1]]});for(let b=1;b+2<d;b++){let c=a[b];f[0]=[c[0],c[1]],f[1]=[c[0]+(g*a[b+1][0]-g*a[b-1][0])/6,c[1]+(g*a[b+1][1]-g*a[b-1][1])/6],f[2]=[a[b+1][0]+(g*a[b][0]-g*a[b+2][0])/6,a[b+1][1]+(g*a[b][1]-g*a[b+2][1])/6],f[3]=[a[b+1][0],a[b+1][1]],e.push({op:"bcurveTo",data:[f[1][0],f[1][1],f[2][0],f[2][1],f[3][0],f[3][1]]})}if(b&&2===b.length){let a=c.maxRandomnessOffset;e.push({op:"lineTo",data:[b[0]+L(a,c),b[1]+L(a,c)]})}}else 3===d?(e.push({op:"move",data:[a[1][0],a[1][1]]}),e.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[2][0],a[2][1]]})):2===d&&e.push(...N(a[0][0],a[0][1],a[1][0],a[1][1],c,!0,!0));return e}function Q(a,b,c,d,e,f,g,h){let i=[],j=[];if(0===h.roughness){a/=4,j.push([b+d*Math.cos(-a),c+e*Math.sin(-a)]);for(let f=0;f<=2*Math.PI;f+=a){let a=[b+d*Math.cos(f),c+e*Math.sin(f)];i.push(a),j.push(a)}j.push([b+ +d,c+0*e]),j.push([b+d*Math.cos(a),c+e*Math.sin(a)])}else{let k=L(.5,h)-Math.PI/2;j.push([L(f,h)+b+.9*d*Math.cos(k-a),L(f,h)+c+.9*e*Math.sin(k-a)]);let l=2*Math.PI+k-.01;for(let g=k;g<l;g+=a){let a=[L(f,h)+b+d*Math.cos(g),L(f,h)+c+e*Math.sin(g)];i.push(a),j.push(a)}j.push([L(f,h)+b+d*Math.cos(k+2*Math.PI+.5*g),L(f,h)+c+e*Math.sin(k+2*Math.PI+.5*g)]),j.push([L(f,h)+b+.98*d*Math.cos(k+g),L(f,h)+c+.98*e*Math.sin(k+g)]),j.push([L(f,h)+b+.9*d*Math.cos(k+.5*g),L(f,h)+c+.9*e*Math.sin(k+.5*g)])}return[j,i]}function R(a,b,c,d,e,f,g,h,i){let j=f+L(.1,i),k=[];k.push([L(h,i)+b+.9*d*Math.cos(j-a),L(h,i)+c+.9*e*Math.sin(j-a)]);for(let f=j;f<=g;f+=a)k.push([L(h,i)+b+d*Math.cos(f),L(h,i)+c+e*Math.sin(f)]);return k.push([b+d*Math.cos(g),c+e*Math.sin(g)]),k.push([b+d*Math.cos(g),c+e*Math.sin(g)]),P(k,null,i)}function S(a,b=0){let c=a.length;if(c<3)throw Error("A curve must have at least three points.");let d=[];if(3===c)d.push([...a[0]],[...a[1]],[...a[2]],[...a[2]]);else{let c=[];c.push(a[0],a[0]);for(let b=1;b<a.length;b++)c.push(a[b]),b===a.length-1&&c.push(a[b]);let e=[],f=1-b;d.push([...c[0]]);for(let a=1;a+2<c.length;a++){let b=c[a];e[0]=[b[0],b[1]],e[1]=[b[0]+(f*c[a+1][0]-f*c[a-1][0])/6,b[1]+(f*c[a+1][1]-f*c[a-1][1])/6],e[2]=[c[a+1][0]+(f*c[a][0]-f*c[a+2][0])/6,c[a+1][1]+(f*c[a][1]-f*c[a+2][1])/6],e[3]=[c[a+1][0],c[a+1][1]],d.push(e[1],e[2],e[3])}}return d}function T(a,b){return Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)}function U(a,b,c){return[a[0]+(b[0]-a[0])*c,a[1]+(b[1]-a[1])*c]}function V(a,b,c,d,e){let f=e||[],g=a[b],h=a[c-1],i=0,j=1;for(let d=b+1;d<c-1;++d){let b=function(a,b,c){let d=T(b,c);if(0===d)return T(a,b);let e=((a[0]-b[0])*(c[0]-b[0])+(a[1]-b[1])*(c[1]-b[1]))/d;return T(a,U(b,c,e=Math.max(0,Math.min(1,e))))}(a[d],g,h);b>i&&(i=b,j=d)}return Math.sqrt(i)>d?(V(a,b,j+1,d,f),V(a,j,c,d,f)):(f.length||f.push(g),f.push(h)),f}function W(a,b=.15,c){let d=[],e=(a.length-1)/3;for(let c=0;c<e;c++)!function a(b,c,d,e){let f,g,h,i,j,k,l,m,n=e||[];if(f=b[c+0],g=b[c+1],h=b[c+2],i=b[c+3],j=3*g[0]-2*f[0]-i[0],j*=j,k=3*g[1]-2*f[1]-i[1],k*=k,l=3*h[0]-2*i[0]-f[0],l*=l,m=3*h[1]-2*i[1]-f[1],m*=m,j<l&&(j=l),k<m&&(k=m),j+k<d){let a=b[c+0];n.length?Math.sqrt(T(n[n.length-1],a))>1&&n.push(a):n.push(a),n.push(b[c+3])}else{let e=b[c+0],f=b[c+1],g=b[c+2],h=b[c+3],i=U(e,f,.5),j=U(f,g,.5),k=U(g,h,.5),l=U(i,j,.5),m=U(j,k,.5),o=U(l,m,.5);a([e,i,l,o],0,d,n),a([o,m,k,h],0,d,n)}return n}(a,3*c,b,d);return c&&c>0?V(d,0,d.length,c):d}let X="none";class Y{constructor(a){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=a||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(0x80000000*Math.random())}_o(a){return a?Object.assign({},this.defaultOptions,a):this.defaultOptions}_d(a,b,c){return{shape:a,sets:b||[],options:c||this.defaultOptions}}line(a,b,c,d,e){let f=this._o(e);return this._d("line",[z(a,b,c,d,f)],f)}rectangle(a,b,c,d,e){var f,g,h,i;let j=this._o(e),k=[],l=A([[f=a,g=b],[f+(h=c),g],[f+h,g+(i=d)],[f,g+i]],!0,j);if(j.fill){let e=[[a,b],[a+c,b],[a+c,b+d],[a,b+d]];"solid"===j.fillStyle?k.push(G([e],j)):k.push(H([e],j))}return j.stroke!==X&&k.push(l),this._d("rectangle",k,j)}ellipse(a,b,c,d,e){let f=this._o(e),g=[],h=C(c,d,f),i=D(a,b,f,h);if(f.fill)if("solid"===f.fillStyle){let c=D(a,b,f,h).opset;c.type="fillPath",g.push(c)}else g.push(H([i.estimatedPoints],f));return f.stroke!==X&&g.push(i.opset),this._d("ellipse",g,f)}circle(a,b,c,d){let e=this.ellipse(a,b,c,c,d);return e.shape="circle",e}linearPath(a,b){let c=this._o(b);return this._d("linearPath",[A(a,!1,c)],c)}arc(a,b,c,d,e,f,g=!1,h){let i=this._o(h),j=[],k=E(a,b,c,d,e,f,g,!0,i);if(g&&i.fill)if("solid"===i.fillStyle){let g=Object.assign({},i);g.disableMultiStroke=!0;let h=E(a,b,c,d,e,f,!0,!1,g);h.type="fillPath",j.push(h)}else j.push(function(a,b,c,d,e,f,g){let h=Math.abs(c/2),i=Math.abs(d/2);h+=L(.01*h,g),i+=L(.01*i,g);let j=e,k=f;for(;j<0;)j+=2*Math.PI,k+=2*Math.PI;k-j>2*Math.PI&&(j=0,k=2*Math.PI);let l=(k-j)/g.curveStepCount,m=[];for(let c=j;c<=k;c+=l)m.push([a+h*Math.cos(c),b+i*Math.sin(c)]);return m.push([a+h*Math.cos(k),b+i*Math.sin(k)]),m.push([a,b]),H([m],g)}(a,b,c,d,e,f,i));return i.stroke!==X&&j.push(k),this._d("arc",j,i)}curve(a,b){let c=this._o(b),d=[],e=B(a,c);if(c.fill&&c.fill!==X)if("solid"===c.fillStyle){let b=B(a,Object.assign(Object.assign({},c),{disableMultiStroke:!0,roughness:c.roughness?c.roughness+c.fillShapeRoughnessGain:0}));d.push({type:"fillPath",ops:this._mergedShape(b.ops)})}else{let b=[];if(a.length)for(let d of"number"==typeof a[0][0]?[a]:a)d.length<3?b.push(...d):3===d.length?b.push(...W(S([d[0],d[0],d[1],d[2]]),10,(1+c.roughness)/2)):b.push(...W(S(d),10,(1+c.roughness)/2));b.length&&d.push(H([b],c))}return c.stroke!==X&&d.push(e),this._d("curve",d,c)}polygon(a,b){let c=this._o(b),d=[],e=A(a,!0,c);return c.fill&&("solid"===c.fillStyle?d.push(G([a],c)):d.push(H([a],c))),c.stroke!==X&&d.push(e),this._d("polygon",d,c)}path(a,b){let c=this._o(b),d=[];if(!a)return this._d("path",d,c);a=(a||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let e=c.fill&&"transparent"!==c.fill&&c.fill!==X,f=c.stroke!==X,g=!!(c.simplification&&c.simplification<1),h=function(a,b,c){let d=w(v(u(a))),e=[],f=[],g=[0,0],h=[],i=()=>{h.length>=4&&f.push(...W(h,1)),h=[]},j=()=>{i(),f.length&&(e.push(f),f=[])};for(let{key:a,data:b}of d)switch(a){case"M":j(),g=[b[0],b[1]],f.push(g);break;case"L":i(),f.push([b[0],b[1]]);break;case"C":if(!h.length){let a=f.length?f[f.length-1]:g;h.push([a[0],a[1]])}h.push([b[0],b[1]]),h.push([b[2],b[3]]),h.push([b[4],b[5]]);break;case"Z":i(),f.push([g[0],g[1]])}if(j(),!c)return e;let k=[];for(let a of e){let b=V(a,0,a.length,c);b.length&&k.push(b)}return k}(a,0,g?4-4*(c.simplification||1):(1+c.roughness)/2),i=F(a,c);if(e)if("solid"===c.fillStyle)if(1===h.length){let b=F(a,Object.assign(Object.assign({},c),{disableMultiStroke:!0,roughness:c.roughness?c.roughness+c.fillShapeRoughnessGain:0}));d.push({type:"fillPath",ops:this._mergedShape(b.ops)})}else d.push(G(h,c));else d.push(H(h,c));return f&&(g?h.forEach(a=>{d.push(A(a,!1,c))}):d.push(i)),this._d("path",d,c)}opsToPath(a,b){let c="";for(let d of a.ops){let a="number"==typeof b&&b>=0?d.data.map(a=>+a.toFixed(b)):d.data;switch(d.op){case"move":c+=`M${a[0]} ${a[1]} `;break;case"bcurveTo":c+=`C${a[0]} ${a[1]}, ${a[2]} ${a[3]}, ${a[4]} ${a[5]} `;break;case"lineTo":c+=`L${a[0]} ${a[1]} `}}return c.trim()}toPaths(a){let b=a.sets||[],c=a.options||this.defaultOptions,d=[];for(let a of b){let b=null;switch(a.type){case"path":b={d:this.opsToPath(a),stroke:c.stroke,strokeWidth:c.strokeWidth,fill:X};break;case"fillPath":b={d:this.opsToPath(a),stroke:X,strokeWidth:0,fill:c.fill||X};break;case"fillSketch":b=this.fillSketch(a,c)}b&&d.push(b)}return d}fillSketch(a,b){let c=b.fillWeight;return c<0&&(c=b.strokeWidth/2),{d:this.opsToPath(a),stroke:b.fill||X,strokeWidth:c,fill:X}}_mergedShape(a){return a.filter((a,b)=>0===b||"move"!==a.op)}}class Z{constructor(a,b){this.canvas=a,this.ctx=this.canvas.getContext("2d"),this.gen=new Y(b)}draw(a){let b=a.sets||[],c=a.options||this.getDefaultOptions(),d=this.ctx,e=a.options.fixedDecimalPlaceDigits;for(let f of b)switch(f.type){case"path":d.save(),d.strokeStyle="none"===c.stroke?"transparent":c.stroke,d.lineWidth=c.strokeWidth,c.strokeLineDash&&d.setLineDash(c.strokeLineDash),c.strokeLineDashOffset&&(d.lineDashOffset=c.strokeLineDashOffset),this._drawToContext(d,f,e),d.restore();break;case"fillPath":{d.save(),d.fillStyle=c.fill||"";let b="curve"===a.shape||"polygon"===a.shape||"path"===a.shape?"evenodd":"nonzero";this._drawToContext(d,f,e,b),d.restore();break}case"fillSketch":this.fillSketch(d,f,c)}}fillSketch(a,b,c){let d=c.fillWeight;d<0&&(d=c.strokeWidth/2),a.save(),c.fillLineDash&&a.setLineDash(c.fillLineDash),c.fillLineDashOffset&&(a.lineDashOffset=c.fillLineDashOffset),a.strokeStyle=c.fill||"",a.lineWidth=d,this._drawToContext(a,b,c.fixedDecimalPlaceDigits),a.restore()}_drawToContext(a,b,c,d="nonzero"){for(let d of(a.beginPath(),b.ops)){let b="number"==typeof c&&c>=0?d.data.map(a=>+a.toFixed(c)):d.data;switch(d.op){case"move":a.moveTo(b[0],b[1]);break;case"bcurveTo":a.bezierCurveTo(b[0],b[1],b[2],b[3],b[4],b[5]);break;case"lineTo":a.lineTo(b[0],b[1])}}"fillPath"===b.type?a.fill(d):a.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(a,b,c,d,e){let f=this.gen.line(a,b,c,d,e);return this.draw(f),f}rectangle(a,b,c,d,e){let f=this.gen.rectangle(a,b,c,d,e);return this.draw(f),f}ellipse(a,b,c,d,e){let f=this.gen.ellipse(a,b,c,d,e);return this.draw(f),f}circle(a,b,c,d){let e=this.gen.circle(a,b,c,d);return this.draw(e),e}linearPath(a,b){let c=this.gen.linearPath(a,b);return this.draw(c),c}polygon(a,b){let c=this.gen.polygon(a,b);return this.draw(c),c}arc(a,b,c,d,e,f,g=!1,h){let i=this.gen.arc(a,b,c,d,e,f,g,h);return this.draw(i),i}curve(a,b){let c=this.gen.curve(a,b);return this.draw(c),c}path(a,b){let c=this.gen.path(a,b);return this.draw(c),c}}let $="http://www.w3.org/2000/svg";class _{constructor(a,b){this.svg=a,this.gen=new Y(b)}draw(a){let b=a.sets||[],c=a.options||this.getDefaultOptions(),d=this.svg.ownerDocument||window.document,e=d.createElementNS($,"g"),f=a.options.fixedDecimalPlaceDigits;for(let g of b){let b=null;switch(g.type){case"path":(b=d.createElementNS($,"path")).setAttribute("d",this.opsToPath(g,f)),b.setAttribute("stroke",c.stroke),b.setAttribute("stroke-width",c.strokeWidth+""),b.setAttribute("fill","none"),c.strokeLineDash&&b.setAttribute("stroke-dasharray",c.strokeLineDash.join(" ").trim()),c.strokeLineDashOffset&&b.setAttribute("stroke-dashoffset",`${c.strokeLineDashOffset}`);break;case"fillPath":(b=d.createElementNS($,"path")).setAttribute("d",this.opsToPath(g,f)),b.setAttribute("stroke","none"),b.setAttribute("stroke-width","0"),b.setAttribute("fill",c.fill||""),"curve"!==a.shape&&"polygon"!==a.shape||b.setAttribute("fill-rule","evenodd");break;case"fillSketch":b=this.fillSketch(d,g,c)}b&&e.appendChild(b)}return e}fillSketch(a,b,c){let d=c.fillWeight;d<0&&(d=c.strokeWidth/2);let e=a.createElementNS($,"path");return e.setAttribute("d",this.opsToPath(b,c.fixedDecimalPlaceDigits)),e.setAttribute("stroke",c.fill||""),e.setAttribute("stroke-width",d+""),e.setAttribute("fill","none"),c.fillLineDash&&e.setAttribute("stroke-dasharray",c.fillLineDash.join(" ").trim()),c.fillLineDashOffset&&e.setAttribute("stroke-dashoffset",`${c.fillLineDashOffset}`),e}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(a,b){return this.gen.opsToPath(a,b)}line(a,b,c,d,e){let f=this.gen.line(a,b,c,d,e);return this.draw(f)}rectangle(a,b,c,d,e){let f=this.gen.rectangle(a,b,c,d,e);return this.draw(f)}ellipse(a,b,c,d,e){let f=this.gen.ellipse(a,b,c,d,e);return this.draw(f)}circle(a,b,c,d){let e=this.gen.circle(a,b,c,d);return this.draw(e)}linearPath(a,b){let c=this.gen.linearPath(a,b);return this.draw(c)}polygon(a,b){let c=this.gen.polygon(a,b);return this.draw(c)}arc(a,b,c,d,e,f,g=!1,h){let i=this.gen.arc(a,b,c,d,e,f,g,h);return this.draw(i)}curve(a,b){let c=this.gen.curve(a,b);return this.draw(c)}path(a,b){let c=this.gen.path(a,b);return this.draw(c)}}var aa={canvas:(a,b)=>new Z(a,b),svg:(a,b)=>new _(a,b),generator:a=>new Y(a),newSeed:()=>Y.newSeed()};a.s(["default",()=>aa],4591);var ab=(0,g.__name)(async(a,b,c)=>{let i,j=b.useHtmlLabels||(0,f.evaluate)((0,f.getConfig2)()?.htmlLabels),k=a.insert("g").attr("class",c||"node default").attr("id",b.domId||b.id),l=k.insert("g").attr("class","label").attr("style",(0,e.handleUndefinedAttr)(b.labelStyle));i=void 0===b.label?"":"string"==typeof b.label?b.label:b.label[0];let m=await (0,d.createText)(l,(0,f.sanitizeText)((0,e.decodeEntities)(i),(0,f.getConfig2)()),{useHtmlLabels:j,width:b.width||(0,f.getConfig2)().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:b.labelStyle,addSvgBackground:!!b.icon||!!b.img}),n=m.getBBox(),o=(b?.padding??0)/2;if(j){let a=m.children[0],b=(0,h.select)(m),c=a.getElementsByTagName("img");if(c){let a=""===i.replace(/<img[^>]*>/g,"").trim();await Promise.all([...c].map(b=>new Promise(c=>{function d(){if(b.style.display="flex",b.style.flexDirection="column",a){let a=(0,f.getConfig2)().fontSize?(0,f.getConfig2)().fontSize:window.getComputedStyle(document.body).fontSize,[c=f.defaultConfig_default.fontSize]=(0,e.parseFontSize)(a),d=5*c+"px";b.style.minWidth=d,b.style.maxWidth=d}else b.style.width="100%";c(b)}(0,g.__name)(d,"setupImage"),setTimeout(()=>{b.complete&&d()}),b.addEventListener("error",d),b.addEventListener("load",d)})))}n=a.getBoundingClientRect(),b.attr("width",n.width),b.attr("height",n.height)}return j?l.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"):l.attr("transform","translate(0, "+-n.height/2+")"),b.centerLabel&&l.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),l.insert("rect",":first-child"),{shapeSvg:k,bbox:n,halfPadding:o,label:l}},"labelHelper"),ac=(0,g.__name)(async(a,b,c)=>{let g=c.useHtmlLabels||(0,f.evaluate)((0,f.getConfig2)()?.flowchart?.htmlLabels),i=a.insert("g").attr("class","label").attr("style",c.labelStyle||""),j=await (0,d.createText)(i,(0,f.sanitizeText)((0,e.decodeEntities)(b),(0,f.getConfig2)()),{useHtmlLabels:g,width:c.width||(0,f.getConfig2)()?.flowchart?.wrappingWidth,style:c.labelStyle,addSvgBackground:!!c.icon||!!c.img}),k=j.getBBox(),l=c.padding/2;if((0,f.evaluate)((0,f.getConfig2)()?.flowchart?.htmlLabels)){let a=j.children[0],b=(0,h.select)(j);k=a.getBoundingClientRect(),b.attr("width",k.width),b.attr("height",k.height)}return g?i.attr("transform","translate("+-k.width/2+", "+-k.height/2+")"):i.attr("transform","translate(0, "+-k.height/2+")"),c.centerLabel&&i.attr("transform","translate("+-k.width/2+", "+-k.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:a,bbox:k,halfPadding:l,label:i}},"insertLabel"),ad=(0,g.__name)((a,b)=>{let c=b.node().getBBox();a.width=c.width,a.height=c.height},"updateNodeBounds"),ae=(0,g.__name)((a,b)=>("handDrawn"===a.look?"rough-node":"node")+" "+a.cssClasses+" "+(b||""),"getNodeClasses");function af(a){let b=a.map((a,b)=>`${0===b?"M":"L"}${a.x},${a.y}`);return b.push("Z"),b.join(" ")}function ag(a,b,c,d,e,f){let g=[],h=c-a,i=2*Math.PI/(h/f),j=b+(d-b)/2;for(let b=0;b<=50;b++){let c=a+b/50*h,d=j+e*Math.sin(i*(c-a));g.push({x:c,y:d})}return g}function ah(a,b,c,d,e,f){let g=[],h=e*Math.PI/180,i=(f*Math.PI/180-h)/(d-1);for(let e=0;e<d;e++){let d=h+e*i,f=a+c*Math.cos(d),j=b+c*Math.sin(d);g.push({x:-f,y:-j})}return g}(0,g.__name)(af,"createPathFromPoints"),(0,g.__name)(ag,"generateFullSineWavePoints"),(0,g.__name)(ah,"generateCirclePoints");var ai=(0,g.__name)((a,b)=>{var c,d,e=a.x,f=a.y,g=b.x-e,h=b.y-f,i=a.width/2,j=a.height/2;return Math.abs(h)*i>Math.abs(g)*j?(h<0&&(j=-j),c=0===h?0:j*g/h,d=j):(g<0&&(i=-i),c=i,d=0===g?0:i*h/g),{x:e+c,y:f+d}},"intersectRect");function aj(a,b){b&&a.attr("style",b)}async function ak(a){let b=(0,h.select)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),c=b.append("xhtml:div"),d=(0,f.getConfig2)(),e=a.label;a.label&&(0,f.hasKatex)(a.label)&&(e=await (0,f.renderKatexSanitized)(a.label.replace(f.common_default.lineBreakRegex,"\n"),d));let g='<span class="'+(a.isNode?"nodeLabel":"edgeLabel")+'" '+(a.labelStyle?'style="'+a.labelStyle+'"':"")+">"+e+"</span>";return c.html((0,f.sanitizeText)(g,d)),aj(c,a.labelStyle),c.style("display","inline-block"),c.style("padding-right","1px"),c.style("white-space","nowrap"),c.attr("xmlns","http://www.w3.org/1999/xhtml"),b.node()}(0,g.__name)(aj,"applyStyle"),(0,g.__name)(ak,"addHtmlLabel");var al=(0,g.__name)(async(a,b,c,d)=>{let h=a||"";if("object"==typeof h&&(h=h[0]),(0,f.evaluate)((0,f.getConfig2)().flowchart.htmlLabels)){h=h.replace(/\\n|\n/g,"<br />"),g.log.info("vertexText"+h);let a={isNode:d,label:(0,e.decodeEntities)(h).replace(/fa[blrs]?:fa-[\w-]+/g,a=>`<i class='${a.replace(":"," ")}'></i>`),labelStyle:b?b.replace("fill:","color:"):b};return await ak(a)}{let a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style",b.replace("color:","fill:"));for(let b of"string"==typeof h?h.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(h)?h:[]){let d=document.createElementNS("http://www.w3.org/2000/svg","tspan");d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),d.setAttribute("dy","1em"),d.setAttribute("x","0"),c?d.setAttribute("class","title-row"):d.setAttribute("class","row"),d.textContent=b.trim(),a.appendChild(d)}return a}},"createLabel"),am=(0,g.__name)((a,b,c,d,e)=>["M",a+e,b,"H",a+c-e,"A",e,e,"0 0 1",a+c,b+e,"V",b+d-e,"A",e,e,"0 0 1",a+c-e,b+d,"H",a+e,"A",e,e,"0 0 1",a,b+d-e,"V",b+e,"A",e,e,"0 0 1",a+e,b,"Z"].join(" "),"createRoundedRectPathD"),an=(0,g.__name)(async(a,e)=>{let i;g.log.info("Creating subgraph rect for ",e.id,e);let j=(0,f.getConfig2)(),{themeVariables:k,handDrawnSeed:l}=j,{clusterBkg:m,clusterBorder:n}=k,{labelStyles:o,nodeStyles:p,borderStyles:q,backgroundStyles:r}=(0,c.styles2String)(e),s=a.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),t=(0,f.evaluate)(j.flowchart.htmlLabels),u=s.insert("g").attr("class","cluster-label "),v=await (0,d.createText)(u,e.label,{style:e.labelStyle,useHtmlLabels:t,isNode:!0}),w=v.getBBox();if((0,f.evaluate)(j.flowchart.htmlLabels)){let a=v.children[0],b=(0,h.select)(v);w=a.getBoundingClientRect(),b.attr("width",w.width),b.attr("height",w.height)}let x=e.width<=w.width+e.padding?w.width+e.padding:e.width;e.width<=w.width+e.padding?e.diff=(x-e.width)/2-e.padding:e.diff=-e.padding;let y=e.height,z=e.x-x/2,A=e.y-y/2;if(g.log.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){let a=aa.svg(s),b=(0,c.userNodeOverrides)(e,{roughness:.7,fill:m,stroke:n,fillWeight:3,seed:l}),d=a.path(am(z,A,x,y,0),b);(i=s.insert(()=>(g.log.debug("Rough node insert CXC",d),d),":first-child")).select("path:nth-child(2)").attr("style",q.join(";")),i.select("path").attr("style",r.join(";").replace("fill","stroke"))}else(i=s.insert("rect",":first-child")).attr("style",p).attr("rx",e.rx).attr("ry",e.ry).attr("x",z).attr("y",A).attr("width",x).attr("height",y);let{subGraphTitleTopMargin:B}=(0,b.getSubGraphTitleMargins)(j);if(u.attr("transform",`translate(${e.x-w.width/2}, ${e.y-e.height/2+B})`),o){let a=u.select("span");a&&a.attr("style",o)}let C=i.node().getBBox();return e.offsetX=0,e.width=C.width,e.height=C.height,e.offsetY=w.height-e.padding/2,e.intersect=function(a){return ai(e,a)},{cluster:s,labelBBox:w}},"rect"),ao=(0,g.__name)((a,b)=>{let c=a.insert("g").attr("class","note-cluster").attr("id",b.id),d=c.insert("rect",":first-child"),e=0*b.padding,f=e/2;d.attr("rx",b.rx).attr("ry",b.ry).attr("x",b.x-b.width/2-f).attr("y",b.y-b.height/2-f).attr("width",b.width+e).attr("height",b.height+e).attr("fill","none");let g=d.node().getBBox();return b.width=g.width,b.height=g.height,b.intersect=function(a){return ai(b,a)},{cluster:c,labelBBox:{width:0,height:0}}},"noteGroup"),ap=(0,g.__name)(async(a,b)=>{let c,d=(0,f.getConfig2)(),{themeVariables:e,handDrawnSeed:g}=d,{altBackground:i,compositeBackground:j,compositeTitleBackground:k,nodeBorder:l}=e,m=a.insert("g").attr("class",b.cssClasses).attr("id",b.id).attr("data-id",b.id).attr("data-look",b.look),n=m.insert("g",":first-child"),o=m.insert("g").attr("class","cluster-label"),p=m.append("rect"),q=o.node().appendChild(await al(b.label,b.labelStyle,void 0,!0)),r=q.getBBox();if((0,f.evaluate)(d.flowchart.htmlLabels)){let a=q.children[0],b=(0,h.select)(q);r=a.getBoundingClientRect(),b.attr("width",r.width),b.attr("height",r.height)}let s=0*b.padding,t=(b.width<=r.width+b.padding?r.width+b.padding:b.width)+s;b.width<=r.width+b.padding?b.diff=(t-b.width)/2-b.padding:b.diff=-b.padding;let u=b.height+s,v=b.height+s-r.height-6,w=b.x-t/2,x=b.y-u/2;b.width=t;let y=b.y-b.height/2-s/2+r.height+2;if("handDrawn"===b.look){let a=b.cssClasses.includes("statediagram-cluster-alt"),d=aa.svg(m),e=b.rx||b.ry?d.path(am(w,x,t,u,10),{roughness:.7,fill:k,fillStyle:"solid",stroke:l,seed:g}):d.rectangle(w,x,t,u,{seed:g});c=m.insert(()=>e,":first-child");let f=d.rectangle(w,y,t,v,{fill:a?i:j,fillStyle:a?"hachure":"solid",stroke:l,seed:g});c=m.insert(()=>e,":first-child"),p=m.insert(()=>f)}else(c=n.insert("rect",":first-child")).attr("class","outer").attr("x",w).attr("y",x).attr("width",t).attr("height",u).attr("data-look",b.look),p.attr("class","inner").attr("x",w).attr("y",y).attr("width",t).attr("height",v);return o.attr("transform",`translate(${b.x-r.width/2}, ${x+1-3*!(0,f.evaluate)(d.flowchart.htmlLabels)})`),b.height=c.node().getBBox().height,b.offsetX=0,b.offsetY=r.height-b.padding/2,b.labelBBox=r,b.intersect=function(a){return ai(b,a)},{cluster:m,labelBBox:r}},"roundedWithTitle"),aq=(0,g.__name)(async(a,e)=>{let i;g.log.info("Creating subgraph rect for ",e.id,e);let j=(0,f.getConfig2)(),{themeVariables:k,handDrawnSeed:l}=j,{clusterBkg:m,clusterBorder:n}=k,{labelStyles:o,nodeStyles:p,borderStyles:q,backgroundStyles:r}=(0,c.styles2String)(e),s=a.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),t=(0,f.evaluate)(j.flowchart.htmlLabels),u=s.insert("g").attr("class","cluster-label "),v=await (0,d.createText)(u,e.label,{style:e.labelStyle,useHtmlLabels:t,isNode:!0,width:e.width}),w=v.getBBox();if((0,f.evaluate)(j.flowchart.htmlLabels)){let a=v.children[0],b=(0,h.select)(v);w=a.getBoundingClientRect(),b.attr("width",w.width),b.attr("height",w.height)}let x=e.width<=w.width+e.padding?w.width+e.padding:e.width;e.width<=w.width+e.padding?e.diff=(x-e.width)/2-e.padding:e.diff=-e.padding;let y=e.height,z=e.x-x/2,A=e.y-y/2;if(g.log.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){let a=aa.svg(s),b=(0,c.userNodeOverrides)(e,{roughness:.7,fill:m,stroke:n,fillWeight:4,seed:l}),d=a.path(am(z,A,x,y,e.rx),b);(i=s.insert(()=>(g.log.debug("Rough node insert CXC",d),d),":first-child")).select("path:nth-child(2)").attr("style",q.join(";")),i.select("path").attr("style",r.join(";").replace("fill","stroke"))}else(i=s.insert("rect",":first-child")).attr("style",p).attr("rx",e.rx).attr("ry",e.ry).attr("x",z).attr("y",A).attr("width",x).attr("height",y);let{subGraphTitleTopMargin:B}=(0,b.getSubGraphTitleMargins)(j);if(u.attr("transform",`translate(${e.x-w.width/2}, ${e.y-e.height/2+B})`),o){let a=u.select("span");a&&a.attr("style",o)}let C=i.node().getBBox();return e.offsetX=0,e.width=C.width,e.height=C.height,e.offsetY=w.height-e.padding/2,e.intersect=function(a){return ai(e,a)},{cluster:s,labelBBox:w}},"kanbanSection"),ar={rect:an,squareRect:an,roundedWithTitle:ap,noteGroup:ao,divider:(0,g.__name)((a,b)=>{let c,{themeVariables:d,handDrawnSeed:e}=(0,f.getConfig2)(),{nodeBorder:g}=d,h=a.insert("g").attr("class",b.cssClasses).attr("id",b.id).attr("data-look",b.look),i=h.insert("g",":first-child"),j=0*b.padding,k=b.width+j;b.diff=-b.padding;let l=b.height+j,m=b.x-k/2,n=b.y-l/2;if(b.width=k,"handDrawn"===b.look){let a=aa.svg(h).rectangle(m,n,k,l,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:g,seed:e});c=h.insert(()=>a,":first-child")}else(c=i.insert("rect",":first-child")).attr("class","divider").attr("x",m).attr("y",n).attr("width",k).attr("height",l).attr("data-look",b.look);return b.height=c.node().getBBox().height,b.offsetX=0,b.offsetY=0,b.intersect=function(a){return ai(b,a)},{cluster:h,labelBBox:{}}},"divider"),kanbanSection:aq},as=new Map,at=(0,g.__name)(async(a,b)=>{let c=b.shape||"rect",d=await ar[c](a,b);return as.set(b.id,d),d},"insertCluster"),au=(0,g.__name)(()=>{as=new Map},"clear");function av(a,b,c,d){var e=a.x,f=a.y,g=e-d.x,h=f-d.y,i=Math.sqrt(b*b*h*h+c*c*g*g),j=Math.abs(b*c*g/i);d.x<e&&(j=-j);var k=Math.abs(b*c*h/i);return d.y<f&&(k=-k),{x:e+j,y:f+k}}function aw(a,b,c){return av(a,b,b,c)}function ax(a,b,c,d){{let e=b.y-a.y,f=a.x-b.x,g=b.x*a.y-a.x*b.y,h=e*c.x+f*c.y+g,i=e*d.x+f*d.y+g;if(0!==h&&0!==i&&ay(h,i))return;let j=d.y-c.y,k=c.x-d.x,l=d.x*c.y-c.x*d.y,m=j*a.x+k*a.y+l,n=j*b.x+k*b.y+l;if(1e-6>Math.abs(m)&&1e-6>Math.abs(n)&&ay(m,n))return;let o=e*k-j*f;if(0===o)return;let p=Math.abs(o/2),q=f*l-k*g;return{x:q<0?(q-p)/o:(q+p)/o,y:(q=j*g-e*l)<0?(q-p)/o:(q+p)/o}}}function ay(a,b){return a*b>0}function az(a,b,c){let d=a.x,e=a.y,f=[],g=1/0,h=1/0;"function"==typeof b.forEach?b.forEach(function(a){g=Math.min(g,a.x),h=Math.min(h,a.y)}):(g=Math.min(g,b.x),h=Math.min(h,b.y));let i=d-a.width/2-g,j=e-a.height/2-h;for(let d=0;d<b.length;d++){let e=b[d],g=b[d<b.length-1?d+1:0],h=ax(a,c,{x:i+e.x,y:j+e.y},{x:i+g.x,y:j+g.y});h&&f.push(h)}return f.length?(f.length>1&&f.sort(function(a,b){let d=a.x-c.x,e=a.y-c.y,f=Math.sqrt(d*d+e*e),g=b.x-c.x,h=b.y-c.y,i=Math.sqrt(g*g+h*h);return f<i?-1:+(f!==i)}),f[0]):a}(0,g.__name)(function(a,b){return a.intersect(b)},"intersectNode"),(0,g.__name)(av,"intersectEllipse"),(0,g.__name)(aw,"intersectCircle"),(0,g.__name)(ax,"intersectLine"),(0,g.__name)(ay,"sameSign"),(0,g.__name)(az,"intersectPolygon");function aA(a,b){let{labelStyles:d}=(0,c.styles2String)(b);b.labelStyle=d;let f=ae(b),h=f;f||(h="anchor");let i=a.insert("g").attr("class",h).attr("id",b.domId||b.id),{cssStyles:j}=b,k=aa.svg(i),l=(0,c.userNodeOverrides)(b,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==b.look&&(l.roughness=0);let m=k.circle(0,0,2,l),n=i.insert(()=>m,":first-child");return n.attr("class","anchor").attr("style",(0,e.handleUndefinedAttr)(j)),ad(b,n),b.intersect=function(a){return g.log.info("Circle intersect",b,1,a),aw(b,1,a)},i}function aB(a,b,c,d,e,f,g){let h=Math.atan2(d-b,c-a),i=Math.sqrt(((c-a)/2/e)**2+((d-b)/2/f)**2);if(i>1)throw Error("The given radii are too small to create an arc between the points.");let j=Math.sqrt(1-i**2),k=(a+c)/2+j*f*Math.sin(h)*(g?-1:1),l=(b+d)/2-j*e*Math.cos(h)*(g?-1:1),m=Math.atan2((b-l)/f,(a-k)/e),n=Math.atan2((d-l)/f,(c-k)/e)-m;g&&n<0&&(n+=2*Math.PI),!g&&n>0&&(n-=2*Math.PI);let o=[];for(let a=0;a<20;a++){let b=m+a/19*n,c=k+e*Math.cos(b),d=l+f*Math.sin(b);o.push({x:c,y:d})}return o}async function aC(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g}=await ab(a,b,ae(b)),h=g.width+b.padding+20,i=g.height+b.padding,j=i/2,k=j/(2.5+i/50),{cssStyles:l}=b,m=[{x:h/2,y:-i/2},{x:-h/2,y:-i/2},...aB(-h/2,-i/2,-h/2,i/2,k,j,!1),{x:h/2,y:i/2},...aB(h/2,i/2,h/2,-i/2,k,j,!0)],n=aa.svg(f),o=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(o.roughness=0,o.fillStyle="solid");let p=af(m),q=n.path(p,o),r=f.insert(()=>q,":first-child");return r.attr("class","basic label-container"),l&&"handDrawn"!==b.look&&r.selectAll("path").attr("style",l),e&&"handDrawn"!==b.look&&r.selectAll("path").attr("style",e),r.attr("transform",`translate(${k/2}, 0)`),ad(b,r),b.intersect=function(a){return az(b,m,a)},f}function aD(a,b,c,d){return a.insert("polygon",":first-child").attr("points",d.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-b/2+","+c/2+")")}async function aE(a,b){let d,{labelStyles:e,nodeStyles:f}=(0,c.styles2String)(b);b.labelStyle=e;let{shapeSvg:g,bbox:h}=await ab(a,b,ae(b)),i=h.height+b.padding,j=h.width+b.padding+12,k=-i,l=[{x:12,y:k},{x:j,y:k},{x:j,y:0},{x:0,y:0},{x:0,y:k+12},{x:12,y:k}],{cssStyles:m}=b;if("handDrawn"===b.look){let a=aa.svg(g),e=(0,c.userNodeOverrides)(b,{}),f=af(l),h=a.path(f,e);d=g.insert(()=>h,":first-child").attr("transform",`translate(${-j/2}, ${i/2})`),m&&d.attr("style",m)}else d=aD(g,j,i,l);return f&&d.attr("style",f),ad(b,d),b.intersect=function(a){return az(b,l,a)},g}function aF(a,b){let{nodeStyles:d}=(0,c.styles2String)(b);b.label="";let e=a.insert("g").attr("class",ae(b)).attr("id",b.domId??b.id),{cssStyles:f}=b,g=Math.max(28,b.width??0),h=[{x:0,y:g/2},{x:g/2,y:0},{x:0,y:-g/2},{x:-g/2,y:0}],i=aa.svg(e),j=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(j.roughness=0,j.fillStyle="solid");let k=af(h),l=i.path(k,j),m=e.insert(()=>l,":first-child");return f&&"handDrawn"!==b.look&&m.selectAll("path").attr("style",f),d&&"handDrawn"!==b.look&&m.selectAll("path").attr("style",d),b.width=28,b.height=28,b.intersect=function(a){return az(b,h,a)},e}async function aG(a,b,d){let f,{labelStyles:h,nodeStyles:i}=(0,c.styles2String)(b);b.labelStyle=h;let{shapeSvg:j,bbox:k,halfPadding:l}=await ab(a,b,ae(b)),m=d?.padding??l,n=k.width/2+m,{cssStyles:o}=b;if("handDrawn"===b.look){let a=aa.svg(j),d=(0,c.userNodeOverrides)(b,{}),g=a.circle(0,0,2*n,d);(f=j.insert(()=>g,":first-child")).attr("class","basic label-container").attr("style",(0,e.handleUndefinedAttr)(o))}else f=j.insert("circle",":first-child").attr("class","basic label-container").attr("style",i).attr("r",n).attr("cx",0).attr("cy",0);return ad(b,f),b.calcIntersect=function(a,b){let c=a.width/2;return aw(a,c,b)},b.intersect=function(a){return g.log.info("Circle intersect",b,n,a),aw(b,n,a)},j}function aH(a){let b=Math.cos(Math.PI/4),c=Math.sin(Math.PI/4),d=2*a,e={x:d/2*b,y:d/2*c},f={x:-(d/2)*b,y:d/2*c},g={x:-(d/2)*b,y:-(d/2)*c},h={x:d/2*b,y:-(d/2)*c};return`M ${f.x},${f.y} L ${h.x},${h.y}
                   M ${e.x},${e.y} L ${g.x},${g.y}`}function aI(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d,b.label="";let f=a.insert("g").attr("class",ae(b)).attr("id",b.domId??b.id),h=Math.max(30,b?.width??0),{cssStyles:i}=b,j=aa.svg(f),k=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(k.roughness=0,k.fillStyle="solid");let l=j.circle(0,0,2*h,k),m=aH(h),n=j.path(m,k),o=f.insert(()=>l,":first-child");return o.insert(()=>n),i&&"handDrawn"!==b.look&&o.selectAll("path").attr("style",i),e&&"handDrawn"!==b.look&&o.selectAll("path").attr("style",e),ad(b,o),b.intersect=function(a){return g.log.info("crossedCircle intersect",b,{radius:h,point:a}),aw(b,h,a)},f}function aJ(a,b,c,d=100,e=0,f=180){let g=[],h=e*Math.PI/180,i=(f*Math.PI/180-h)/(d-1);for(let e=0;e<d;e++){let d=h+e*i,f=a+c*Math.cos(d),j=b+c*Math.sin(d);g.push({x:-f,y:-j})}return g}async function aK(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,label:h}=await ab(a,b,ae(b)),i=g.width+(b.padding??0),j=g.height+(b.padding??0),k=Math.max(5,.1*j),{cssStyles:l}=b,m=[...aJ(i/2,-j/2,k,30,-90,0),{x:-i/2-k,y:k},...aJ(i/2+2*k,-k,k,20,-180,-270),...aJ(i/2+2*k,k,k,20,-90,-180),{x:-i/2-k,y:-j/2},...aJ(i/2,j/2,k,20,0,90)],n=[{x:i/2,y:-j/2-k},{x:-i/2,y:-j/2-k},...aJ(i/2,-j/2,k,20,-90,0),{x:-i/2-k,y:-k},...aJ(i/2+.1*i,-k,k,20,-180,-270),...aJ(i/2+.1*i,k,k,20,-90,-180),{x:-i/2-k,y:j/2},...aJ(i/2,j/2,k,20,0,90),{x:-i/2,y:j/2+k},{x:i/2,y:j/2+k}],o=aa.svg(f),p=(0,c.userNodeOverrides)(b,{fill:"none"});"handDrawn"!==b.look&&(p.roughness=0,p.fillStyle="solid");let q=af(m).replace("Z",""),r=o.path(q,p),s=af(n),t=o.path(s,{...p}),u=f.insert("g",":first-child");return u.insert(()=>t,":first-child").attr("stroke-opacity",0),u.insert(()=>r,":first-child"),u.attr("class","text"),l&&"handDrawn"!==b.look&&u.selectAll("path").attr("style",l),e&&"handDrawn"!==b.look&&u.selectAll("path").attr("style",e),u.attr("transform",`translate(${k}, 0)`),h.attr("transform",`translate(${-i/2+k-(g.x-(g.left??0))},${-j/2+(b.padding??0)/2-(g.y-(g.top??0))})`),ad(b,u),b.intersect=function(a){return az(b,n,a)},f}function aL(a,b,c,d=100,e=0,f=180){let g=[],h=e*Math.PI/180,i=(f*Math.PI/180-h)/(d-1);for(let e=0;e<d;e++){let d=h+e*i,f=a+c*Math.cos(d),j=b+c*Math.sin(d);g.push({x:f,y:j})}return g}async function aM(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,label:h}=await ab(a,b,ae(b)),i=g.width+(b.padding??0),j=g.height+(b.padding??0),k=Math.max(5,.1*j),{cssStyles:l}=b,m=[...aL(i/2,-j/2,k,20,-90,0),{x:i/2+k,y:-k},...aL(i/2+2*k,-k,k,20,-180,-270),...aL(i/2+2*k,k,k,20,-90,-180),{x:i/2+k,y:j/2},...aL(i/2,j/2,k,20,0,90)],n=[{x:-i/2,y:-j/2-k},{x:i/2,y:-j/2-k},...aL(i/2,-j/2,k,20,-90,0),{x:i/2+k,y:-k},...aL(i/2+2*k,-k,k,20,-180,-270),...aL(i/2+2*k,k,k,20,-90,-180),{x:i/2+k,y:j/2},...aL(i/2,j/2,k,20,0,90),{x:i/2,y:j/2+k},{x:-i/2,y:j/2+k}],o=aa.svg(f),p=(0,c.userNodeOverrides)(b,{fill:"none"});"handDrawn"!==b.look&&(p.roughness=0,p.fillStyle="solid");let q=af(m).replace("Z",""),r=o.path(q,p),s=af(n),t=o.path(s,{...p}),u=f.insert("g",":first-child");return u.insert(()=>t,":first-child").attr("stroke-opacity",0),u.insert(()=>r,":first-child"),u.attr("class","text"),l&&"handDrawn"!==b.look&&u.selectAll("path").attr("style",l),e&&"handDrawn"!==b.look&&u.selectAll("path").attr("style",e),u.attr("transform",`translate(${-k}, 0)`),h.attr("transform",`translate(${-i/2+(b.padding??0)/2-(g.x-(g.left??0))},${-j/2+(b.padding??0)/2-(g.y-(g.top??0))})`),ad(b,u),b.intersect=function(a){return az(b,n,a)},f}function aN(a,b,c,d=100,e=0,f=180){let g=[],h=e*Math.PI/180,i=(f*Math.PI/180-h)/(d-1);for(let e=0;e<d;e++){let d=h+e*i,f=a+c*Math.cos(d),j=b+c*Math.sin(d);g.push({x:-f,y:-j})}return g}async function aO(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,label:h}=await ab(a,b,ae(b)),i=g.width+(b.padding??0),j=g.height+(b.padding??0),k=Math.max(5,.1*j),{cssStyles:l}=b,m=[...aN(i/2,-j/2,k,30,-90,0),{x:-i/2-k,y:k},...aN(i/2+2*k,-k,k,20,-180,-270),...aN(i/2+2*k,k,k,20,-90,-180),{x:-i/2-k,y:-j/2},...aN(i/2,j/2,k,20,0,90)],n=[...aN(-i/2+k+k/2,-j/2,k,20,-90,-180),{x:i/2-k/2,y:k},...aN(-i/2-k/2,-k,k,20,0,90),...aN(-i/2-k/2,k,k,20,-90,0),{x:i/2-k/2,y:-k},...aN(-i/2+k+k/2,j/2,k,30,-180,-270)],o=[{x:i/2,y:-j/2-k},{x:-i/2,y:-j/2-k},...aN(i/2,-j/2,k,20,-90,0),{x:-i/2-k,y:-k},...aN(i/2+2*k,-k,k,20,-180,-270),...aN(i/2+2*k,k,k,20,-90,-180),{x:-i/2-k,y:j/2},...aN(i/2,j/2,k,20,0,90),{x:-i/2,y:j/2+k},{x:i/2-k-k/2,y:j/2+k},...aN(-i/2+k+k/2,-j/2,k,20,-90,-180),{x:i/2-k/2,y:k},...aN(-i/2-k/2,-k,k,20,0,90),...aN(-i/2-k/2,k,k,20,-90,0),{x:i/2-k/2,y:-k},...aN(-i/2+k+k/2,j/2,k,30,-180,-270)],p=aa.svg(f),q=(0,c.userNodeOverrides)(b,{fill:"none"});"handDrawn"!==b.look&&(q.roughness=0,q.fillStyle="solid");let r=af(m).replace("Z",""),s=p.path(r,q),t=af(n).replace("Z",""),u=p.path(t,q),v=af(o),w=p.path(v,{...q}),x=f.insert("g",":first-child");return x.insert(()=>w,":first-child").attr("stroke-opacity",0),x.insert(()=>s,":first-child"),x.insert(()=>u,":first-child"),x.attr("class","text"),l&&"handDrawn"!==b.look&&x.selectAll("path").attr("style",l),e&&"handDrawn"!==b.look&&x.selectAll("path").attr("style",e),x.attr("transform",`translate(${k-k/4}, 0)`),h.attr("transform",`translate(${-i/2+(b.padding??0)/2-(g.x-(g.left??0))},${-j/2+(b.padding??0)/2-(g.y-(g.top??0))})`),ad(b,x),b.intersect=function(a){return az(b,o,a)},f}async function aP(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g}=await ab(a,b,ae(b)),h=Math.max(80,(g.width+(b.padding??0)*2)*1.25,b?.width??0),i=Math.max(20,g.height+(b.padding??0)*2,b?.height??0),j=i/2,{cssStyles:k}=b,l=aa.svg(f),m=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(m.roughness=0,m.fillStyle="solid");let n=h-j,o=i/4,p=[{x:n,y:0},{x:o,y:0},{x:0,y:i/2},{x:o,y:i},{x:n,y:i},...ah(-n,-i/2,j,50,270,90)],q=af(p),r=l.path(q,m),s=f.insert(()=>r,":first-child");return s.attr("class","basic label-container"),k&&"handDrawn"!==b.look&&s.selectChildren("path").attr("style",k),e&&"handDrawn"!==b.look&&s.selectChildren("path").attr("style",e),s.attr("transform",`translate(${-h/2}, ${-i/2})`),ad(b,s),b.intersect=function(a){return az(b,p,a)},f}(0,g.__name)(aA,"anchor"),(0,g.__name)(aB,"generateArcPoints"),(0,g.__name)(aC,"bowTieRect"),(0,g.__name)(aD,"insertPolygonShape"),(0,g.__name)(aE,"card"),(0,g.__name)(aF,"choice"),(0,g.__name)(aG,"circle"),(0,g.__name)(aH,"createLine"),(0,g.__name)(aI,"crossedCircle"),(0,g.__name)(aJ,"generateCirclePoints"),(0,g.__name)(aK,"curlyBraceLeft"),(0,g.__name)(aL,"generateCirclePoints"),(0,g.__name)(aM,"curlyBraceRight"),(0,g.__name)(aN,"generateCirclePoints"),(0,g.__name)(aO,"curlyBraces"),(0,g.__name)(aP,"curvedTrapezoid");var aQ=(0,g.__name)((a,b,c,d,e,f)=>`M${a},${b+f} a${e},${f} 0,0,0 ${c},0 a${e},${f} 0,0,0 ${-c},0 l0,${d} a${e},${f} 0,0,0 ${c},0 l0,${-d}`,"createCylinderPathD"),aR=(0,g.__name)((a,b,c,d,e,f)=>`M${a},${b+f} M${a+c},${b+f} a${e},${f} 0,0,0 ${-c},0 l0,${d} a${e},${f} 0,0,0 ${c},0 l0,${-d}`,"createOuterCylinderPathD"),aS=(0,g.__name)((a,b,c,d,e,f)=>`M${a-c/2},${-d/2} a${e},${f} 0,0,0 ${c},0`,"createInnerCylinderPathD");async function aT(a,b){let d,{labelStyles:f,nodeStyles:g}=(0,c.styles2String)(b);b.labelStyle=f;let{shapeSvg:h,bbox:i,label:j}=await ab(a,b,ae(b)),k=Math.max(i.width+b.padding,b.width??0),l=k/2,m=l/(2.5+k/50),n=Math.max(i.height+m+b.padding,b.height??0),{cssStyles:o}=b;if("handDrawn"===b.look){let a=aa.svg(h),e=aR(0,0,k,n,l,m),f=aS(0,m,k,n,l,m),g=a.path(e,(0,c.userNodeOverrides)(b,{})),i=a.path(f,(0,c.userNodeOverrides)(b,{fill:"none"}));d=h.insert(()=>i,":first-child"),(d=h.insert(()=>g,":first-child")).attr("class","basic label-container"),o&&d.attr("style",o)}else{let a=aQ(0,0,k,n,l,m);d=h.insert("path",":first-child").attr("d",a).attr("class","basic label-container").attr("style",(0,e.handleUndefinedAttr)(o)).attr("style",g)}return d.attr("label-offset-y",m),d.attr("transform",`translate(${-k/2}, ${-(n/2+m)})`),ad(b,d),j.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)+(b.padding??0)/1.5-(i.y-(i.top??0))})`),b.intersect=function(a){let c=ai(b,a),d=c.x-(b.x??0);if(0!=l&&(Math.abs(d)<(b.width??0)/2||Math.abs(d)==(b.width??0)/2&&Math.abs(c.y-(b.y??0))>(b.height??0)/2-m)){let e=m*m*(1-d*d/(l*l));e>0&&(e=Math.sqrt(e)),e=m-e,a.y-(b.y??0)>0&&(e=-e),c.y+=e}return c},h}async function aU(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,label:h}=await ab(a,b,ae(b)),i=g.width+b.padding,j=g.height+b.padding,k=.2*j,l=-i/2,m=-j/2-k/2,{cssStyles:n}=b,o=aa.svg(f),p=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(p.roughness=0,p.fillStyle="solid");let q=o.polygon([{x:l,y:m+k},{x:-l,y:m+k},{x:-l,y:-m},{x:l,y:-m},{x:l,y:m},{x:-l,y:m},{x:-l,y:m+k}].map(a=>[a.x,a.y]),p),r=f.insert(()=>q,":first-child");return r.attr("class","basic label-container"),n&&"handDrawn"!==b.look&&r.selectAll("path").attr("style",n),e&&"handDrawn"!==b.look&&r.selectAll("path").attr("style",e),h.attr("transform",`translate(${l+(b.padding??0)/2-(g.x-(g.left??0))}, ${m+k+(b.padding??0)/2-(g.y-(g.top??0))})`),ad(b,r),b.intersect=function(a){return ai(b,a)},f}async function aV(a,b){let d,{labelStyles:f,nodeStyles:h}=(0,c.styles2String)(b);b.labelStyle=f;let{shapeSvg:i,bbox:j,halfPadding:k}=await ab(a,b,ae(b)),l=j.width/2+k+5,m=j.width/2+k,{cssStyles:n}=b;if("handDrawn"===b.look){let a=aa.svg(i),f=(0,c.userNodeOverrides)(b,{roughness:.2,strokeWidth:2.5}),g=(0,c.userNodeOverrides)(b,{roughness:.2,strokeWidth:1.5}),h=a.circle(0,0,2*l,f),j=a.circle(0,0,2*m,g);(d=i.insert("g",":first-child")).attr("class",(0,e.handleUndefinedAttr)(b.cssClasses)).attr("style",(0,e.handleUndefinedAttr)(n)),d.node()?.appendChild(h),d.node()?.appendChild(j)}else{let a=(d=i.insert("g",":first-child")).insert("circle",":first-child"),b=d.insert("circle");d.attr("class","basic label-container").attr("style",h),a.attr("class","outer-circle").attr("style",h).attr("r",l).attr("cx",0).attr("cy",0),b.attr("class","inner-circle").attr("style",h).attr("r",m).attr("cx",0).attr("cy",0)}return ad(b,d),b.intersect=function(a){return g.log.info("DoubleCircle intersect",b,l,a),aw(b,l,a)},i}function aW(a,b,{config:{themeVariables:d}}){let{labelStyles:e,nodeStyles:f}=(0,c.styles2String)(b);b.label="",b.labelStyle=e;let h=a.insert("g").attr("class",ae(b)).attr("id",b.domId??b.id),{cssStyles:i}=b,j=aa.svg(h),{nodeBorder:k}=d,l=(0,c.userNodeOverrides)(b,{fillStyle:"solid"});"handDrawn"!==b.look&&(l.roughness=0);let m=j.circle(0,0,14,l),n=h.insert(()=>m,":first-child");return n.selectAll("path").attr("style",`fill: ${k} !important;`),i&&i.length>0&&"handDrawn"!==b.look&&n.selectAll("path").attr("style",i),f&&"handDrawn"!==b.look&&n.selectAll("path").attr("style",f),ad(b,n),b.intersect=function(a){return g.log.info("filledCircle intersect",b,{radius:7,point:a}),aw(b,7,a)},h}async function aX(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:h,label:i}=await ab(a,b,ae(b)),j=h.width+(b.padding??0),k=j+h.height,l=j+h.height,m=[{x:0,y:-k},{x:l,y:-k},{x:l/2,y:0}],{cssStyles:n}=b,o=aa.svg(f),p=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(p.roughness=0,p.fillStyle="solid");let q=af(m),r=o.path(q,p),s=f.insert(()=>r,":first-child").attr("transform",`translate(${-k/2}, ${k/2})`);return n&&"handDrawn"!==b.look&&s.selectChildren("path").attr("style",n),e&&"handDrawn"!==b.look&&s.selectChildren("path").attr("style",e),b.width=j,b.height=k,ad(b,s),i.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))}, ${-k/2+(b.padding??0)/2+(h.y-(h.top??0))})`),b.intersect=function(a){return g.log.info("Triangle intersect",b,m,a),az(b,m,a)},f}function aY(a,b,{dir:d,config:{state:e,themeVariables:f}}){let{nodeStyles:g}=(0,c.styles2String)(b);b.label="";let h=a.insert("g").attr("class",ae(b)).attr("id",b.domId??b.id),{cssStyles:i}=b,j=Math.max(70,b?.width??0),k=Math.max(10,b?.height??0);"LR"===d&&(j=Math.max(10,b?.width??0),k=Math.max(70,b?.height??0));let l=-1*j/2,m=-1*k/2,n=aa.svg(h),o=(0,c.userNodeOverrides)(b,{stroke:f.lineColor,fill:f.lineColor});"handDrawn"!==b.look&&(o.roughness=0,o.fillStyle="solid");let p=n.rectangle(l,m,j,k,o),q=h.insert(()=>p,":first-child");i&&"handDrawn"!==b.look&&q.selectAll("path").attr("style",i),g&&"handDrawn"!==b.look&&q.selectAll("path").attr("style",g),ad(b,q);let r=e?.padding??0;return b.width&&b.height&&(b.width+=r/2||0,b.height+=r/2||0),b.intersect=function(a){return ai(b,a)},h}async function aZ(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:h}=await ab(a,b,ae(b)),i=Math.max(80,h.width+(b.padding??0)*2,b?.width??0),j=Math.max(50,h.height+(b.padding??0)*2,b?.height??0),k=j/2,{cssStyles:l}=b,m=aa.svg(f),n=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(n.roughness=0,n.fillStyle="solid");let o=[{x:-i/2,y:-j/2},{x:i/2-k,y:-j/2},...ah(-i/2+k,0,k,50,90,270),{x:i/2-k,y:j/2},{x:-i/2,y:j/2}],p=af(o),q=m.path(p,n),r=f.insert(()=>q,":first-child");return r.attr("class","basic label-container"),l&&"handDrawn"!==b.look&&r.selectChildren("path").attr("style",l),e&&"handDrawn"!==b.look&&r.selectChildren("path").attr("style",e),ad(b,r),b.intersect=function(a){return g.log.info("Pill intersect",b,{radius:k,point:a}),az(b,o,a)},f}async function a$(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g}=await ab(a,b,ae(b)),h=g.height+(b.padding??0),i=g.width+(b.padding??0)*2.5,{cssStyles:j}=b,k=aa.svg(f),l=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(l.roughness=0,l.fillStyle="solid");let m=i/2,n=m/6,o=h/2,p=(m+=n)-o/2,q=[{x:-p,y:-o},{x:0,y:-o},{x:p,y:-o},{x:m,y:0},{x:p,y:o},{x:0,y:o},{x:-p,y:o},{x:-m,y:0}],r=af(q),s=k.path(r,l),t=f.insert(()=>s,":first-child");return t.attr("class","basic label-container"),j&&"handDrawn"!==b.look&&t.selectChildren("path").attr("style",j),e&&"handDrawn"!==b.look&&t.selectChildren("path").attr("style",e),b.width=i,b.height=h,ad(b,t),b.intersect=function(a){return az(b,q,a)},f}async function a_(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.label="",b.labelStyle=d;let{shapeSvg:f}=await ab(a,b,ae(b)),h=Math.max(30,b?.width??0),i=Math.max(30,b?.height??0),{cssStyles:j}=b,k=aa.svg(f),l=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(l.roughness=0,l.fillStyle="solid");let m=[{x:0,y:0},{x:h,y:0},{x:0,y:i},{x:h,y:i}],n=af(m),o=k.path(n,l),p=f.insert(()=>o,":first-child");return p.attr("class","basic label-container"),j&&"handDrawn"!==b.look&&p.selectChildren("path").attr("style",j),e&&"handDrawn"!==b.look&&p.selectChildren("path").attr("style",e),p.attr("transform",`translate(${-h/2}, ${-i/2})`),ad(b,p),b.intersect=function(a){return g.log.info("Pill intersect",b,{points:m}),az(b,m,a)},f}async function a0(a,b,{config:{themeVariables:e,flowchart:f}}){let{labelStyles:h}=(0,c.styles2String)(b);b.labelStyle=h;let i=Math.max(b.assetHeight??48,b.assetWidth??48);b.width=Math.max(i,f?.wrappingWidth??0);let{shapeSvg:j,bbox:k,label:l}=await ab(a,b,"icon-shape default"),m="t"===b.pos,{nodeBorder:n}=e,{stylesMap:o}=(0,c.compileStyles)(b),p=-i/2,q=-i/2,r=8*!!b.label,s=aa.svg(j),t=(0,c.userNodeOverrides)(b,{stroke:"none",fill:"none"});"handDrawn"!==b.look&&(t.roughness=0,t.fillStyle="solid");let u=s.rectangle(p,q,i,i,t),v=Math.max(i,k.width),w=i+k.height+r,x=s.rectangle(-v/2,-w/2,v,w,{...t,fill:"transparent",stroke:"none"}),y=j.insert(()=>u,":first-child"),z=j.insert(()=>x);if(b.icon){let a=j.append("g");a.html(`<g>${await (0,d.getIconSVG)(b.icon,{height:i,width:i,fallbackPrefix:""})}</g>`);let c=a.node().getBBox(),e=c.width,f=c.height,g=c.x,h=c.y;a.attr("transform",`translate(${-e/2-g},${m?k.height/2+r/2-f/2-h:-k.height/2-r/2-f/2-h})`),a.attr("style",`color: ${o.get("stroke")??n};`)}return l.attr("transform",`translate(${-k.width/2-(k.x-(k.left??0))},${m?-w/2:w/2-k.height})`),y.attr("transform",`translate(0,${m?k.height/2+r/2:-k.height/2-r/2})`),ad(b,z),b.intersect=function(a){if(g.log.info("iconSquare intersect",b,a),!b.label)return ai(b,a);let c=b.x??0,d=b.y??0,e=b.height??0,f=[];return az(b,f=m?[{x:c-k.width/2,y:d-e/2},{x:c+k.width/2,y:d-e/2},{x:c+k.width/2,y:d-e/2+k.height+r},{x:c+i/2,y:d-e/2+k.height+r},{x:c+i/2,y:d+e/2},{x:c-i/2,y:d+e/2},{x:c-i/2,y:d-e/2+k.height+r},{x:c-k.width/2,y:d-e/2+k.height+r}]:[{x:c-i/2,y:d-e/2},{x:c+i/2,y:d-e/2},{x:c+i/2,y:d-e/2+i},{x:c+k.width/2,y:d-e/2+i},{x:c+k.width/2/2,y:d+e/2},{x:c-k.width/2,y:d+e/2},{x:c-k.width/2,y:d-e/2+i},{x:c-i/2,y:d-e/2+i}],a)},j}async function a1(a,b,{config:{themeVariables:e,flowchart:f}}){let{labelStyles:h}=(0,c.styles2String)(b);b.labelStyle=h;let i=Math.max(b.assetHeight??48,b.assetWidth??48);b.width=Math.max(i,f?.wrappingWidth??0);let{shapeSvg:j,bbox:k,label:l}=await ab(a,b,"icon-shape default"),m=8*!!b.label,n="t"===b.pos,{nodeBorder:o,mainBkg:p}=e,{stylesMap:q}=(0,c.compileStyles)(b),r=aa.svg(j),s=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(s.roughness=0,s.fillStyle="solid"),s.stroke=q.get("fill")??p;let t=j.append("g");b.icon&&t.html(`<g>${await (0,d.getIconSVG)(b.icon,{height:i,width:i,fallbackPrefix:""})}</g>`);let u=t.node().getBBox(),v=u.width,w=u.height,x=u.x,y=u.y,z=Math.max(v,w)*Math.SQRT2+40,A=r.circle(0,0,z,s),B=Math.max(z,k.width),C=z+k.height+m,D=r.rectangle(-B/2,-C/2,B,C,{...s,fill:"transparent",stroke:"none"}),E=j.insert(()=>A,":first-child"),F=j.insert(()=>D);return t.attr("transform",`translate(${-v/2-x},${n?k.height/2+m/2-w/2-y:-k.height/2-m/2-w/2-y})`),t.attr("style",`color: ${q.get("stroke")??o};`),l.attr("transform",`translate(${-k.width/2-(k.x-(k.left??0))},${n?-C/2:C/2-k.height})`),E.attr("transform",`translate(0,${n?k.height/2+m/2:-k.height/2-m/2})`),ad(b,F),b.intersect=function(a){return g.log.info("iconSquare intersect",b,a),ai(b,a)},j}async function a2(a,b,{config:{themeVariables:e,flowchart:f}}){let{labelStyles:h}=(0,c.styles2String)(b);b.labelStyle=h;let i=Math.max(b.assetHeight??48,b.assetWidth??48);b.width=Math.max(i,f?.wrappingWidth??0);let{shapeSvg:j,bbox:k,halfPadding:l,label:m}=await ab(a,b,"icon-shape default"),n="t"===b.pos,o=i+2*l,p=i+2*l,{nodeBorder:q,mainBkg:r}=e,{stylesMap:s}=(0,c.compileStyles)(b),t=8*!!b.label,u=aa.svg(j),v=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(v.roughness=0,v.fillStyle="solid"),v.stroke=s.get("fill")??r;let w=u.path(am(-p/2,-o/2,p,o,5),v),x=Math.max(p,k.width),y=o+k.height+t,z=u.rectangle(-x/2,-y/2,x,y,{...v,fill:"transparent",stroke:"none"}),A=j.insert(()=>w,":first-child").attr("class","icon-shape2"),B=j.insert(()=>z);if(b.icon){let a=j.append("g");a.html(`<g>${await (0,d.getIconSVG)(b.icon,{height:i,width:i,fallbackPrefix:""})}</g>`);let c=a.node().getBBox(),e=c.width,f=c.height,g=c.x,h=c.y;a.attr("transform",`translate(${-e/2-g},${n?k.height/2+t/2-f/2-h:-k.height/2-t/2-f/2-h})`),a.attr("style",`color: ${s.get("stroke")??q};`)}return m.attr("transform",`translate(${-k.width/2-(k.x-(k.left??0))},${n?-y/2:y/2-k.height})`),A.attr("transform",`translate(0,${n?k.height/2+t/2:-k.height/2-t/2})`),ad(b,B),b.intersect=function(a){if(g.log.info("iconSquare intersect",b,a),!b.label)return ai(b,a);let c=b.x??0,d=b.y??0,e=b.height??0,f=[];return az(b,f=n?[{x:c-k.width/2,y:d-e/2},{x:c+k.width/2,y:d-e/2},{x:c+k.width/2,y:d-e/2+k.height+t},{x:c+p/2,y:d-e/2+k.height+t},{x:c+p/2,y:d+e/2},{x:c-p/2,y:d+e/2},{x:c-p/2,y:d-e/2+k.height+t},{x:c-k.width/2,y:d-e/2+k.height+t}]:[{x:c-p/2,y:d-e/2},{x:c+p/2,y:d-e/2},{x:c+p/2,y:d-e/2+o},{x:c+k.width/2,y:d-e/2+o},{x:c+k.width/2/2,y:d+e/2},{x:c-k.width/2,y:d+e/2},{x:c-k.width/2,y:d-e/2+o},{x:c-p/2,y:d-e/2+o}],a)},j}async function a3(a,b,{config:{themeVariables:e,flowchart:f}}){let{labelStyles:h}=(0,c.styles2String)(b);b.labelStyle=h;let i=Math.max(b.assetHeight??48,b.assetWidth??48);b.width=Math.max(i,f?.wrappingWidth??0);let{shapeSvg:j,bbox:k,halfPadding:l,label:m}=await ab(a,b,"icon-shape default"),n="t"===b.pos,o=i+2*l,p=i+2*l,{nodeBorder:q,mainBkg:r}=e,{stylesMap:s}=(0,c.compileStyles)(b),t=8*!!b.label,u=aa.svg(j),v=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(v.roughness=0,v.fillStyle="solid"),v.stroke=s.get("fill")??r;let w=u.path(am(-p/2,-o/2,p,o,.1),v),x=Math.max(p,k.width),y=o+k.height+t,z=u.rectangle(-x/2,-y/2,x,y,{...v,fill:"transparent",stroke:"none"}),A=j.insert(()=>w,":first-child"),B=j.insert(()=>z);if(b.icon){let a=j.append("g");a.html(`<g>${await (0,d.getIconSVG)(b.icon,{height:i,width:i,fallbackPrefix:""})}</g>`);let c=a.node().getBBox(),e=c.width,f=c.height,g=c.x,h=c.y;a.attr("transform",`translate(${-e/2-g},${n?k.height/2+t/2-f/2-h:-k.height/2-t/2-f/2-h})`),a.attr("style",`color: ${s.get("stroke")??q};`)}return m.attr("transform",`translate(${-k.width/2-(k.x-(k.left??0))},${n?-y/2:y/2-k.height})`),A.attr("transform",`translate(0,${n?k.height/2+t/2:-k.height/2-t/2})`),ad(b,B),b.intersect=function(a){if(g.log.info("iconSquare intersect",b,a),!b.label)return ai(b,a);let c=b.x??0,d=b.y??0,e=b.height??0,f=[];return az(b,f=n?[{x:c-k.width/2,y:d-e/2},{x:c+k.width/2,y:d-e/2},{x:c+k.width/2,y:d-e/2+k.height+t},{x:c+p/2,y:d-e/2+k.height+t},{x:c+p/2,y:d+e/2},{x:c-p/2,y:d+e/2},{x:c-p/2,y:d-e/2+k.height+t},{x:c-k.width/2,y:d-e/2+k.height+t}]:[{x:c-p/2,y:d-e/2},{x:c+p/2,y:d-e/2},{x:c+p/2,y:d-e/2+o},{x:c+k.width/2,y:d-e/2+o},{x:c+k.width/2/2,y:d+e/2},{x:c-k.width/2,y:d+e/2},{x:c-k.width/2,y:d-e/2+o},{x:c-p/2,y:d-e/2+o}],a)},j}async function a4(a,b,{config:{flowchart:d}}){let e=new Image;e.src=b?.img??"",await e.decode();let f=Number(e.naturalWidth.toString().replace("px","")),h=Number(e.naturalHeight.toString().replace("px",""));b.imageAspectRatio=f/h;let{labelStyles:i}=(0,c.styles2String)(b);b.labelStyle=i;let j=d?.wrappingWidth;b.defaultWidth=d?.wrappingWidth;let k=Math.max(b.label?j??0:0,b?.assetWidth??f),l="on"===b.constraint&&b?.assetHeight?b.assetHeight*b.imageAspectRatio:k,m="on"===b.constraint?l/b.imageAspectRatio:b?.assetHeight??h;b.width=Math.max(l,j??0);let{shapeSvg:n,bbox:o,label:p}=await ab(a,b,"image-shape default"),q="t"===b.pos,r=-l/2,s=8*!!b.label,t=aa.svg(n),u=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(u.roughness=0,u.fillStyle="solid");let v=t.rectangle(r,-m/2,l,m,u),w=Math.max(l,o.width),x=m+o.height+s,y=t.rectangle(-w/2,-x/2,w,x,{...u,fill:"none",stroke:"none"}),z=n.insert(()=>v,":first-child"),A=n.insert(()=>y);if(b.img){let a=n.append("image");a.attr("href",b.img),a.attr("width",l),a.attr("height",m),a.attr("preserveAspectRatio","none"),a.attr("transform",`translate(${-l/2},${q?x/2-m:-x/2})`)}return p.attr("transform",`translate(${-o.width/2-(o.x-(o.left??0))},${q?-m/2-o.height/2-s/2:m/2-o.height/2+s/2})`),z.attr("transform",`translate(0,${q?o.height/2+s/2:-o.height/2-s/2})`),ad(b,A),b.intersect=function(a){if(g.log.info("iconSquare intersect",b,a),!b.label)return ai(b,a);let c=b.x??0,d=b.y??0,e=b.height??0,f=[];return az(b,f=q?[{x:c-o.width/2,y:d-e/2},{x:c+o.width/2,y:d-e/2},{x:c+o.width/2,y:d-e/2+o.height+s},{x:c+l/2,y:d-e/2+o.height+s},{x:c+l/2,y:d+e/2},{x:c-l/2,y:d+e/2},{x:c-l/2,y:d-e/2+o.height+s},{x:c-o.width/2,y:d-e/2+o.height+s}]:[{x:c-l/2,y:d-e/2},{x:c+l/2,y:d-e/2},{x:c+l/2,y:d-e/2+m},{x:c+o.width/2,y:d-e/2+m},{x:c+o.width/2/2,y:d+e/2},{x:c-o.width/2,y:d+e/2},{x:c-o.width/2,y:d-e/2+m},{x:c-l/2,y:d-e/2+m}],a)},n}async function a5(a,b){let d,{labelStyles:e,nodeStyles:f}=(0,c.styles2String)(b);b.labelStyle=e;let{shapeSvg:g,bbox:h}=await ab(a,b,ae(b)),i=Math.max(h.width+(b.padding??0)*2,b?.width??0),j=Math.max(h.height+(b.padding??0)*2,b?.height??0),k=[{x:0,y:0},{x:i,y:0},{x:i+3*j/6,y:-j},{x:-3*j/6,y:-j}],{cssStyles:l}=b;if("handDrawn"===b.look){let a=aa.svg(g),e=(0,c.userNodeOverrides)(b,{}),f=af(k),h=a.path(f,e);d=g.insert(()=>h,":first-child").attr("transform",`translate(${-i/2}, ${j/2})`),l&&d.attr("style",l)}else d=aD(g,i,j,k);return f&&d.attr("style",f),b.width=i,b.height=j,ad(b,d),b.intersect=function(a){return az(b,k,a)},g}async function a6(a,b,d){let f,{labelStyles:g,nodeStyles:h}=(0,c.styles2String)(b);b.labelStyle=g;let{shapeSvg:i,bbox:j}=await ab(a,b,ae(b)),k=Math.max(j.width+2*d.labelPaddingX,b?.width||0),l=Math.max(j.height+2*d.labelPaddingY,b?.height||0),m=-k/2,n=-l/2,{rx:o,ry:p}=b,{cssStyles:q}=b;if(d?.rx&&d.ry&&(o=d.rx,p=d.ry),"handDrawn"===b.look){let a=aa.svg(i),d=(0,c.userNodeOverrides)(b,{}),g=o||p?a.path(am(m,n,k,l,o||0),d):a.rectangle(m,n,k,l,d);(f=i.insert(()=>g,":first-child")).attr("class","basic label-container").attr("style",(0,e.handleUndefinedAttr)(q))}else(f=i.insert("rect",":first-child")).attr("class","basic label-container").attr("style",h).attr("rx",(0,e.handleUndefinedAttr)(o)).attr("ry",(0,e.handleUndefinedAttr)(p)).attr("x",m).attr("y",n).attr("width",k).attr("height",l);return ad(b,f),b.calcIntersect=function(a,b){return ai(a,b)},b.intersect=function(a){return ai(b,a)},i}async function a7(a,b){let{shapeSvg:c,bbox:d,label:e}=await ab(a,b,"label"),f=c.insert("rect",":first-child");return f.attr("width",.1).attr("height",.1),c.attr("class","label edgeLabel"),e.attr("transform",`translate(${-(d.width/2)-(d.x-(d.left??0))}, ${-(d.height/2)-(d.y-(d.top??0))})`),ad(b,f),b.intersect=function(a){return ai(b,a)},c}async function a8(a,b){let d,{labelStyles:e,nodeStyles:f}=(0,c.styles2String)(b);b.labelStyle=e;let{shapeSvg:g,bbox:h}=await ab(a,b,ae(b)),i=Math.max(h.width+(b.padding??0),b?.width??0),j=Math.max(h.height+(b.padding??0),b?.height??0),k=[{x:0,y:0},{x:i+3*j/6,y:0},{x:i,y:-j},{x:-(3*j)/6,y:-j}],{cssStyles:l}=b;if("handDrawn"===b.look){let a=aa.svg(g),e=(0,c.userNodeOverrides)(b,{}),f=af(k),h=a.path(f,e);d=g.insert(()=>h,":first-child").attr("transform",`translate(${-i/2}, ${j/2})`),l&&d.attr("style",l)}else d=aD(g,i,j,k);return f&&d.attr("style",f),b.width=i,b.height=j,ad(b,d),b.intersect=function(a){return az(b,k,a)},g}async function a9(a,b){let d,{labelStyles:e,nodeStyles:f}=(0,c.styles2String)(b);b.labelStyle=e;let{shapeSvg:g,bbox:h}=await ab(a,b,ae(b)),i=Math.max(h.width+(b.padding??0),b?.width??0),j=Math.max(h.height+(b.padding??0),b?.height??0),k=[{x:-3*j/6,y:0},{x:i,y:0},{x:i+3*j/6,y:-j},{x:0,y:-j}],{cssStyles:l}=b;if("handDrawn"===b.look){let a=aa.svg(g),e=(0,c.userNodeOverrides)(b,{}),f=af(k),h=a.path(f,e);d=g.insert(()=>h,":first-child").attr("transform",`translate(${-i/2}, ${j/2})`),l&&d.attr("style",l)}else d=aD(g,i,j,k);return f&&d.attr("style",f),b.width=i,b.height=j,ad(b,d),b.intersect=function(a){return az(b,k,a)},g}function ba(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.label="",b.labelStyle=d;let f=a.insert("g").attr("class",ae(b)).attr("id",b.domId??b.id),{cssStyles:h}=b,i=Math.max(35,b?.width??0),j=Math.max(35,b?.height??0),k=[{x:i,y:0},{x:0,y:j+3.5},{x:i-14,y:j+3.5},{x:0,y:2*j},{x:i,y:j-3.5},{x:14,y:j-3.5}],l=aa.svg(f),m=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(m.roughness=0,m.fillStyle="solid");let n=af(k),o=l.path(n,m),p=f.insert(()=>o,":first-child");return h&&"handDrawn"!==b.look&&p.selectAll("path").attr("style",h),e&&"handDrawn"!==b.look&&p.selectAll("path").attr("style",e),p.attr("transform",`translate(-${i/2},${-j})`),ad(b,p),b.intersect=function(a){return g.log.info("lightningBolt intersect",b,a),az(b,k,a)},f}(0,g.__name)(aT,"cylinder"),(0,g.__name)(aU,"dividedRectangle"),(0,g.__name)(aV,"doublecircle"),(0,g.__name)(aW,"filledCircle"),(0,g.__name)(aX,"flippedTriangle"),(0,g.__name)(aY,"forkJoin"),(0,g.__name)(aZ,"halfRoundedRectangle"),(0,g.__name)(a$,"hexagon"),(0,g.__name)(a_,"hourglass"),(0,g.__name)(a0,"icon"),(0,g.__name)(a1,"iconCircle"),(0,g.__name)(a2,"iconRounded"),(0,g.__name)(a3,"iconSquare"),(0,g.__name)(a4,"imageSquare"),(0,g.__name)(a5,"inv_trapezoid"),(0,g.__name)(a6,"drawRect"),(0,g.__name)(a7,"labelRect"),(0,g.__name)(a8,"lean_left"),(0,g.__name)(a9,"lean_right"),(0,g.__name)(ba,"lightningBolt");var bb=(0,g.__name)((a,b,c,d,e,f,g)=>`M${a},${b+f} a${e},${f} 0,0,0 ${c},0 a${e},${f} 0,0,0 ${-c},0 l0,${d} a${e},${f} 0,0,0 ${c},0 l0,${-d} M${a},${b+f+g} a${e},${f} 0,0,0 ${c},0`,"createCylinderPathD"),bc=(0,g.__name)((a,b,c,d,e,f,g)=>`M${a},${b+f} M${a+c},${b+f} a${e},${f} 0,0,0 ${-c},0 l0,${d} a${e},${f} 0,0,0 ${c},0 l0,${-d} M${a},${b+f+g} a${e},${f} 0,0,0 ${c},0`,"createOuterCylinderPathD"),bd=(0,g.__name)((a,b,c,d,e,f)=>`M${a-c/2},${-d/2} a${e},${f} 0,0,0 ${c},0`,"createInnerCylinderPathD");async function be(a,b){let d,{labelStyles:f,nodeStyles:g}=(0,c.styles2String)(b);b.labelStyle=f;let{shapeSvg:h,bbox:i,label:j}=await ab(a,b,ae(b)),k=Math.max(i.width+(b.padding??0),b.width??0),l=k/2,m=l/(2.5+k/50),n=Math.max(i.height+m+(b.padding??0),b.height??0),o=.1*n,{cssStyles:p}=b;if("handDrawn"===b.look){let a=aa.svg(h),e=bc(0,0,k,n,l,m,o),f=bd(0,m,k,n,l,m),g=(0,c.userNodeOverrides)(b,{}),i=a.path(e,g),j=a.path(f,g);h.insert(()=>j,":first-child").attr("class","line"),(d=h.insert(()=>i,":first-child")).attr("class","basic label-container"),p&&d.attr("style",p)}else{let a=bb(0,0,k,n,l,m,o);d=h.insert("path",":first-child").attr("d",a).attr("class","basic label-container").attr("style",(0,e.handleUndefinedAttr)(p)).attr("style",g)}return d.attr("label-offset-y",m),d.attr("transform",`translate(${-k/2}, ${-(n/2+m)})`),ad(b,d),j.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)+m-(i.y-(i.top??0))})`),b.intersect=function(a){let c=ai(b,a),d=c.x-(b.x??0);if(0!=l&&(Math.abs(d)<(b.width??0)/2||Math.abs(d)==(b.width??0)/2&&Math.abs(c.y-(b.y??0))>(b.height??0)/2-m)){let e=m*m*(1-d*d/(l*l));e>0&&(e=Math.sqrt(e)),e=m-e,a.y-(b.y??0)>0&&(e=-e),c.y+=e}return c},h}async function bf(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,label:h}=await ab(a,b,ae(b)),i=Math.max(g.width+(b.padding??0)*2,b?.width??0),j=Math.max(g.height+(b.padding??0)*2,b?.height??0),k=j/4,l=j+k,{cssStyles:m}=b,n=aa.svg(f),o=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(o.roughness=0,o.fillStyle="solid");let p=[{x:-i/2-i/2*.1,y:-l/2},{x:-i/2-i/2*.1,y:l/2},...ag(-i/2-i/2*.1,l/2,i/2+i/2*.1,l/2,k,.8),{x:i/2+i/2*.1,y:-l/2},{x:-i/2-i/2*.1,y:-l/2},{x:-i/2,y:-l/2},{x:-i/2,y:l/2*1.1},{x:-i/2,y:-l/2}],q=n.polygon(p.map(a=>[a.x,a.y]),o),r=f.insert(()=>q,":first-child");return r.attr("class","basic label-container"),m&&"handDrawn"!==b.look&&r.selectAll("path").attr("style",m),e&&"handDrawn"!==b.look&&r.selectAll("path").attr("style",e),r.attr("transform",`translate(0,${-k/2})`),h.attr("transform",`translate(${-i/2+(b.padding??0)+i/2*.1/2-(g.x-(g.left??0))},${-j/2+(b.padding??0)-k/2-(g.y-(g.top??0))})`),ad(b,r),b.intersect=function(a){return az(b,p,a)},f}async function bg(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,label:h}=await ab(a,b,ae(b)),i=Math.max(g.width+(b.padding??0)*2,b?.width??0),j=Math.max(g.height+(b.padding??0)*2,b?.height??0),k=-i/2,l=-j/2,{cssStyles:m}=b,n=aa.svg(f),o=(0,c.userNodeOverrides)(b,{}),p=[{x:k-5,y:l+5},{x:k-5,y:l+j+5},{x:k+i-5,y:l+j+5},{x:k+i-5,y:l+j},{x:k+i,y:l+j},{x:k+i,y:l+j-5},{x:k+i+5,y:l+j-5},{x:k+i+5,y:l-5},{x:k+5,y:l-5},{x:k+5,y:l},{x:k,y:l},{x:k,y:l+5}];"handDrawn"!==b.look&&(o.roughness=0,o.fillStyle="solid");let q=af(p),r=n.path(q,o),s=af([{x:k,y:l+5},{x:k+i-5,y:l+5},{x:k+i-5,y:l+j},{x:k+i,y:l+j},{x:k+i,y:l},{x:k,y:l}]),t=n.path(s,{...o,fill:"none"}),u=f.insert(()=>t,":first-child");return u.insert(()=>r,":first-child"),u.attr("class","basic label-container"),m&&"handDrawn"!==b.look&&u.selectAll("path").attr("style",m),e&&"handDrawn"!==b.look&&u.selectAll("path").attr("style",e),h.attr("transform",`translate(${-(g.width/2)-5-(g.x-(g.left??0))}, ${-(g.height/2)+5-(g.y-(g.top??0))})`),ad(b,u),b.intersect=function(a){return az(b,p,a)},f}async function bh(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,label:h}=await ab(a,b,ae(b)),i=Math.max(g.width+(b.padding??0)*2,b?.width??0),j=Math.max(g.height+(b.padding??0)*2,b?.height??0),k=j/4,l=j+k,m=-i/2,n=-l/2,{cssStyles:o}=b,p=ag(m-5,n+l+5,m+i-5,n+l+5,k,.8),q=p?.[p.length-1],r=[{x:m-5,y:n+5},{x:m-5,y:n+l+5},...p,{x:m+i-5,y:q.y-5},{x:m+i,y:q.y-5},{x:m+i,y:q.y-10},{x:m+i+5,y:q.y-10},{x:m+i+5,y:n-5},{x:m+5,y:n-5},{x:m+5,y:n},{x:m,y:n},{x:m,y:n+5}],s=[{x:m,y:n+5},{x:m+i-5,y:n+5},{x:m+i-5,y:q.y-5},{x:m+i,y:q.y-5},{x:m+i,y:n},{x:m,y:n}],t=aa.svg(f),u=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(u.roughness=0,u.fillStyle="solid");let v=af(r),w=t.path(v,u),x=af(s),y=t.path(x,u),z=f.insert(()=>w,":first-child");return z.insert(()=>y),z.attr("class","basic label-container"),o&&"handDrawn"!==b.look&&z.selectAll("path").attr("style",o),e&&"handDrawn"!==b.look&&z.selectAll("path").attr("style",e),z.attr("transform",`translate(0,${-k/2})`),h.attr("transform",`translate(${-(g.width/2)-5-(g.x-(g.left??0))}, ${-(g.height/2)+5-k/2-(g.y-(g.top??0))})`),ad(b,z),b.intersect=function(a){return az(b,r,a)},f}async function bi(a,b,{config:{themeVariables:d}}){let{labelStyles:e,nodeStyles:g}=(0,c.styles2String)(b);b.labelStyle=e,b.useHtmlLabels||(0,f.getConfig)().flowchart?.htmlLabels!==!1||(b.centerLabel=!0);let{shapeSvg:h,bbox:i,label:j}=await ab(a,b,ae(b)),k=Math.max(i.width+(b.padding??0)*2,b?.width??0),l=Math.max(i.height+(b.padding??0)*2,b?.height??0),{cssStyles:m}=b,n=aa.svg(h),o=(0,c.userNodeOverrides)(b,{fill:d.noteBkgColor,stroke:d.noteBorderColor});"handDrawn"!==b.look&&(o.roughness=0,o.fillStyle="solid");let p=n.rectangle(-k/2,-l/2,k,l,o),q=h.insert(()=>p,":first-child");return q.attr("class","basic label-container"),m&&"handDrawn"!==b.look&&q.selectAll("path").attr("style",m),g&&"handDrawn"!==b.look&&q.selectAll("path").attr("style",g),j.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),ad(b,q),b.intersect=function(a){return ai(b,a)},h}(0,g.__name)(be,"linedCylinder"),(0,g.__name)(bf,"linedWaveEdgedRect"),(0,g.__name)(bg,"multiRect"),(0,g.__name)(bh,"multiWaveEdgedRectangle"),(0,g.__name)(bi,"note");var bj=(0,g.__name)((a,b,c)=>`M${a+c/2},${b} L${a+c},${b-c/2} L${a+c/2},${b-c} L${a},${b-c/2} Z`,"createDecisionBoxPathD");async function bk(a,b){let d,{labelStyles:e,nodeStyles:f}=(0,c.styles2String)(b);b.labelStyle=e;let{shapeSvg:g,bbox:h}=await ab(a,b,ae(b)),i=h.width+b.padding+(h.height+b.padding),j=[{x:i/2,y:0},{x:i,y:-i/2},{x:i/2,y:-i},{x:0,y:-i/2}],{cssStyles:k}=b;if("handDrawn"===b.look){let a=aa.svg(g),e=(0,c.userNodeOverrides)(b,{}),f=bj(0,0,i),h=a.path(f,e);d=g.insert(()=>h,":first-child").attr("transform",`translate(${-i/2+.5}, ${i/2})`),k&&d.attr("style",k)}else(d=aD(g,i,i,j)).attr("transform",`translate(${-i/2+.5}, ${i/2})`);return f&&d.attr("style",f),ad(b,d),b.calcIntersect=function(a,b){let c=a.width,d=az(a,[{x:c/2,y:0},{x:c,y:-c/2},{x:c/2,y:-c},{x:0,y:-c/2}],b);return{x:d.x-.5,y:d.y-.5}},b.intersect=function(a){return this.calcIntersect(b,a)},g}async function bl(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,label:h}=await ab(a,b,ae(b)),i=Math.max(g.width+(b.padding??0),b?.width??0),j=Math.max(g.height+(b.padding??0),b?.height??0),k=-i/2,l=-j/2,m=l/2,n=[{x:k+m,y:l},{x:k,y:0},{x:k+m,y:-l},{x:-k,y:-l},{x:-k,y:l}],{cssStyles:o}=b,p=aa.svg(f),q=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(q.roughness=0,q.fillStyle="solid");let r=af(n),s=p.path(r,q),t=f.insert(()=>s,":first-child");return t.attr("class","basic label-container"),o&&"handDrawn"!==b.look&&t.selectAll("path").attr("style",o),e&&"handDrawn"!==b.look&&t.selectAll("path").attr("style",e),t.attr("transform",`translate(${-m/2},0)`),h.attr("transform",`translate(${-m/2-g.width/2-(g.x-(g.left??0))}, ${-(g.height/2)-(g.y-(g.top??0))})`),ad(b,t),b.intersect=function(a){return az(b,n,a)},f}async function bm(a,b){let d,e,i,{labelStyles:j,nodeStyles:k}=(0,c.styles2String)(b);b.labelStyle=j,d=b.cssClasses?"node "+b.cssClasses:"node default";let l=a.insert("g").attr("class",d).attr("id",b.domId||b.id),m=l.insert("g"),n=l.insert("g").attr("class","label").attr("style",k),o=b.description,p=b.label,q=n.node().appendChild(await al(p,b.labelStyle,!0,!0)),r={width:0,height:0};if((0,f.evaluate)((0,f.getConfig2)()?.flowchart?.htmlLabels)){let a=q.children[0],b=(0,h.select)(q);r=a.getBoundingClientRect(),b.attr("width",r.width),b.attr("height",r.height)}g.log.info("Text 2",o);let s=o||[],t=q.getBBox(),u=n.node().appendChild(await al(s.join?s.join("<br/>"):s,b.labelStyle,!0,!0)),v=u.children[0],w=(0,h.select)(u);r=v.getBoundingClientRect(),w.attr("width",r.width),w.attr("height",r.height);let x=(b.padding||0)/2;(0,h.select)(u).attr("transform","translate( "+(r.width>t.width?0:(t.width-r.width)/2)+", "+(t.height+x+5)+")"),(0,h.select)(q).attr("transform","translate( "+(r.width<t.width?0:-(t.width-r.width)/2)+", 0)"),r=n.node().getBBox(),n.attr("transform","translate("+-r.width/2+", "+(-r.height/2-x+3)+")");let y=r.width+(b.padding||0),z=r.height+(b.padding||0),A=-r.width/2-x,B=-r.height/2-x;if("handDrawn"===b.look){let a=aa.svg(l),d=(0,c.userNodeOverrides)(b,{}),f=a.path(am(A,B,y,z,b.rx||0),d),h=a.line(-r.width/2-x,-r.height/2-x+t.height+x,r.width/2+x,-r.height/2-x+t.height+x,d);i=l.insert(()=>(g.log.debug("Rough node insert CXC",f),h),":first-child"),e=l.insert(()=>(g.log.debug("Rough node insert CXC",f),f),":first-child")}else e=m.insert("rect",":first-child"),i=m.insert("line"),e.attr("class","outer title-state").attr("style",k).attr("x",-r.width/2-x).attr("y",-r.height/2-x).attr("width",r.width+(b.padding||0)).attr("height",r.height+(b.padding||0)),i.attr("class","divider").attr("x1",-r.width/2-x).attr("x2",r.width/2+x).attr("y1",-r.height/2-x+t.height+x).attr("y2",-r.height/2-x+t.height+x);return ad(b,e),b.intersect=function(a){return ai(b,a)},l}function bn(a,b,c,d,e,f,g){let h=Math.atan2(d-b,c-a),i=Math.sqrt(((c-a)/2/e)**2+((d-b)/2/f)**2);if(i>1)throw Error("The given radii are too small to create an arc between the points.");let j=Math.sqrt(1-i**2),k=(a+c)/2+j*f*Math.sin(h)*(g?-1:1),l=(b+d)/2-j*e*Math.cos(h)*(g?-1:1),m=Math.atan2((b-l)/f,(a-k)/e),n=Math.atan2((d-l)/f,(c-k)/e)-m;g&&n<0&&(n+=2*Math.PI),!g&&n>0&&(n-=2*Math.PI);let o=[];for(let a=0;a<20;a++){let b=m+a/19*n,c=k+e*Math.cos(b),d=l+f*Math.sin(b);o.push({x:c,y:d})}return o}async function bo(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g}=await ab(a,b,ae(b)),h=b?.padding??0,i=b?.padding??0,j=(b?.width?b?.width:g.width)+2*h,k=(b?.height?b?.height:g.height)+2*i,l=b.radius||5,m=b.taper||5,{cssStyles:n}=b,o=aa.svg(f),p=(0,c.userNodeOverrides)(b,{});b.stroke&&(p.stroke=b.stroke),"handDrawn"!==b.look&&(p.roughness=0,p.fillStyle="solid");let q=[{x:-j/2+m,y:-k/2},{x:j/2-m,y:-k/2},...bn(j/2-m,-k/2,j/2,-k/2+m,l,l,!0),{x:j/2,y:-k/2+m},{x:j/2,y:k/2-m},...bn(j/2,k/2-m,j/2-m,k/2,l,l,!0),{x:j/2-m,y:k/2},{x:-j/2+m,y:k/2},...bn(-j/2+m,k/2,-j/2,k/2-m,l,l,!0),{x:-j/2,y:k/2-m},{x:-j/2,y:-k/2+m},...bn(-j/2,-k/2+m,-j/2+m,-k/2,l,l,!0)],r=af(q),s=o.path(r,p),t=f.insert(()=>s,":first-child");return t.attr("class","basic label-container outer-path"),n&&"handDrawn"!==b.look&&t.selectChildren("path").attr("style",n),e&&"handDrawn"!==b.look&&t.selectChildren("path").attr("style",e),ad(b,t),b.intersect=function(a){return az(b,q,a)},f}async function bp(a,b){let{labelStyles:d,nodeStyles:f}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:g,bbox:h,label:i}=await ab(a,b,ae(b)),j=b?.padding??0,k=Math.max(h.width+(b.padding??0)*2,b?.width??0),l=Math.max(h.height+(b.padding??0)*2,b?.height??0),m=-h.width/2-j,n=-h.height/2-j,{cssStyles:o}=b,p=aa.svg(g),q=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(q.roughness=0,q.fillStyle="solid");let r=p.polygon([{x:m,y:n},{x:m+k+8,y:n},{x:m+k+8,y:n+l},{x:m-8,y:n+l},{x:m-8,y:n},{x:m,y:n},{x:m,y:n+l}].map(a=>[a.x,a.y]),q),s=g.insert(()=>r,":first-child");return s.attr("class","basic label-container").attr("style",(0,e.handleUndefinedAttr)(o)),f&&"handDrawn"!==b.look&&s.selectAll("path").attr("style",f),o&&"handDrawn"!==b.look&&s.selectAll("path").attr("style",f),i.attr("transform",`translate(${-k/2+4+(b.padding??0)-(h.x-(h.left??0))},${-l/2+(b.padding??0)-(h.y-(h.top??0))})`),ad(b,s),b.intersect=function(a){return ai(b,a)},g}async function bq(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,label:h}=await ab(a,b,ae(b)),i=Math.max(g.width+(b.padding??0)*2,b?.width??0),j=Math.max(g.height+(b.padding??0)*2,b?.height??0),k=-i/2,l=-j/2,{cssStyles:m}=b,n=aa.svg(f),o=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(o.roughness=0,o.fillStyle="solid");let p=[{x:k,y:l},{x:k,y:l+j},{x:k+i,y:l+j},{x:k+i,y:l-j/2}],q=af(p),r=n.path(q,o),s=f.insert(()=>r,":first-child");return s.attr("class","basic label-container"),m&&"handDrawn"!==b.look&&s.selectChildren("path").attr("style",m),e&&"handDrawn"!==b.look&&s.selectChildren("path").attr("style",e),s.attr("transform",`translate(0, ${j/4})`),h.attr("transform",`translate(${-i/2+(b.padding??0)-(g.x-(g.left??0))}, ${-j/4+(b.padding??0)-(g.y-(g.top??0))})`),ad(b,s),b.intersect=function(a){return az(b,p,a)},f}async function br(a,b){let c={rx:0,ry:0,classes:"",labelPaddingX:b.labelPaddingX??2*(b?.padding||0),labelPaddingY:+(b?.padding||0)};return a6(a,b,c)}async function bs(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g}=await ab(a,b,ae(b)),h=g.height+b.padding,i=g.width+h/4+b.padding,j=h/2,{cssStyles:k}=b,l=aa.svg(f),m=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(m.roughness=0,m.fillStyle="solid");let n=[{x:-i/2+j,y:-h/2},{x:i/2-j,y:-h/2},...ah(-i/2+j,0,j,50,90,270),{x:i/2-j,y:h/2},...ah(i/2-j,0,j,50,270,450)],o=af(n),p=l.path(o,m),q=f.insert(()=>p,":first-child");return q.attr("class","basic label-container outer-path"),k&&"handDrawn"!==b.look&&q.selectChildren("path").attr("style",k),e&&"handDrawn"!==b.look&&q.selectChildren("path").attr("style",e),ad(b,q),b.intersect=function(a){return az(b,n,a)},f}async function bt(a,b){return a6(a,b,{rx:5,ry:5,classes:"flowchart-node"})}function bu(a,b,{config:{themeVariables:d}}){let{labelStyles:e,nodeStyles:f}=(0,c.styles2String)(b);b.labelStyle=e;let{cssStyles:g}=b,{lineColor:h,stateBorder:i,nodeBorder:j}=d,k=a.insert("g").attr("class","node default").attr("id",b.domId||b.id),l=aa.svg(k),m=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(m.roughness=0,m.fillStyle="solid");let n=l.circle(0,0,14,{...m,stroke:h,strokeWidth:2}),o=i??j,p=l.circle(0,0,5,{...m,fill:o,stroke:o,strokeWidth:2,fillStyle:"solid"}),q=k.insert(()=>n,":first-child");return q.insert(()=>p),g&&q.selectAll("path").attr("style",g),f&&q.selectAll("path").attr("style",f),ad(b,q),b.intersect=function(a){return aw(b,7,a)},k}function bv(a,b,{config:{themeVariables:d}}){let e,{lineColor:f}=d,g=a.insert("g").attr("class","node default").attr("id",b.domId||b.id);if("handDrawn"===b.look){let a=aa.svg(g).circle(0,0,14,(0,c.solidStateFill)(f));(e=g.insert(()=>a)).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else(e=g.insert("circle",":first-child")).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return ad(b,e),b.intersect=function(a){return aw(b,7,a)},g}async function bw(a,b){let{labelStyles:d,nodeStyles:f}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:g,bbox:h}=await ab(a,b,ae(b)),i=(b?.padding||0)/2,j=h.width+b.padding,k=h.height+b.padding,l=-h.width/2-i,m=-h.height/2-i,n=[{x:0,y:0},{x:j,y:0},{x:j,y:-k},{x:0,y:-k},{x:0,y:0},{x:-8,y:0},{x:j+8,y:0},{x:j+8,y:-k},{x:-8,y:-k},{x:-8,y:0}];if("handDrawn"===b.look){let a=aa.svg(g),d=(0,c.userNodeOverrides)(b,{}),f=a.rectangle(l-8,m,j+16,k,d),h=a.line(l,m,l,m+k,d),i=a.line(l+j,m,l+j,m+k,d);g.insert(()=>h,":first-child"),g.insert(()=>i,":first-child");let n=g.insert(()=>f,":first-child"),{cssStyles:o}=b;n.attr("class","basic label-container").attr("style",(0,e.handleUndefinedAttr)(o)),ad(b,n)}else{let a=aD(g,j,k,n);f&&a.attr("style",f),ad(b,a)}return b.intersect=function(a){return az(b,n,a)},g}async function bx(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g}=await ab(a,b,ae(b)),h=Math.max(g.width+(b.padding??0)*2,b?.width??0),i=Math.max(g.height+(b.padding??0)*2,b?.height??0),j=-h/2,k=-i/2,l=.2*i,{cssStyles:m}=b,n=aa.svg(f),o=(0,c.userNodeOverrides)(b,{}),p=[{x:j-l/2,y:k},{x:j+h+l/2,y:k},{x:j+h+l/2,y:k+i},{x:j-l/2,y:k+i}];"handDrawn"!==b.look&&(o.roughness=0,o.fillStyle="solid");let q=af(p),r=n.path(q,o),s=af([{x:j+h-l/2,y:k+i},{x:j+h+l/2,y:k+i},{x:j+h+l/2,y:k+i-.2*i}]),t=n.path(s,{...o,fillStyle:"solid"}),u=f.insert(()=>t,":first-child");return u.insert(()=>r,":first-child"),u.attr("class","basic label-container"),m&&"handDrawn"!==b.look&&u.selectAll("path").attr("style",m),e&&"handDrawn"!==b.look&&u.selectAll("path").attr("style",e),ad(b,u),b.intersect=function(a){return az(b,p,a)},f}async function by(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,label:h}=await ab(a,b,ae(b)),i=Math.max(g.width+(b.padding??0)*2,b?.width??0),j=Math.max(g.height+(b.padding??0)*2,b?.height??0),k=j/4,l=.2*i,m=.2*j,n=j+k,{cssStyles:o}=b,p=aa.svg(f),q=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(q.roughness=0,q.fillStyle="solid");let r=[{x:-i/2-i/2*.1,y:n/2},...ag(-i/2-i/2*.1,n/2,i/2+i/2*.1,n/2,k,.8),{x:i/2+i/2*.1,y:-n/2},{x:-i/2-i/2*.1,y:-n/2}],s=-i/2+i/2*.1,t=-n/2-.4*m,u=[{x:s+i-l,y:(t+j)*1.4},{x:s+i,y:t+j-m},{x:s+i,y:(t+j)*.9},...ag(s+i,(t+j)*1.3,s+i-l,(t+j)*1.5,-(.03*j),.5)],v=af(r),w=p.path(v,q),x=af(u),y=p.path(x,{...q,fillStyle:"solid"}),z=f.insert(()=>y,":first-child");return z.insert(()=>w,":first-child"),z.attr("class","basic label-container"),o&&"handDrawn"!==b.look&&z.selectAll("path").attr("style",o),e&&"handDrawn"!==b.look&&z.selectAll("path").attr("style",e),z.attr("transform",`translate(0,${-k/2})`),h.attr("transform",`translate(${-i/2+(b.padding??0)-(g.x-(g.left??0))},${-j/2+(b.padding??0)-k/2-(g.y-(g.top??0))})`),ad(b,z),b.intersect=function(a){return az(b,r,a)},f}async function bz(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g}=await ab(a,b,ae(b)),h=Math.max(g.width+b.padding,b?.width||0),i=Math.max(g.height+b.padding,b?.height||0),j=f.insert("rect",":first-child");return j.attr("class","text").attr("style",e).attr("rx",0).attr("ry",0).attr("x",-h/2).attr("y",-i/2).attr("width",h).attr("height",i),ad(b,j),b.intersect=function(a){return ai(b,a)},f}(0,g.__name)(bk,"question"),(0,g.__name)(bl,"rect_left_inv_arrow"),(0,g.__name)(bm,"rectWithTitle"),(0,g.__name)(bn,"generateArcPoints"),(0,g.__name)(bo,"roundedRect"),(0,g.__name)(bp,"shadedProcess"),(0,g.__name)(bq,"slopedRect"),(0,g.__name)(br,"squareRect"),(0,g.__name)(bs,"stadium"),(0,g.__name)(bt,"state"),(0,g.__name)(bu,"stateEnd"),(0,g.__name)(bv,"stateStart"),(0,g.__name)(bw,"subroutine"),(0,g.__name)(bx,"taggedRect"),(0,g.__name)(by,"taggedWaveEdgedRectangle"),(0,g.__name)(bz,"text");var bA=(0,g.__name)((a,b,c,d,e,f)=>`M${a},${b}
    a${e},${f} 0,0,1 0,${-d}
    l${c},0
    a${e},${f} 0,0,1 0,${d}
    M${c},${-d}
    a${e},${f} 0,0,0 0,${d}
    l${-c},0`,"createCylinderPathD"),bB=(0,g.__name)((a,b,c,d,e,f)=>`M${a},${b} M${a+c},${b} a${e},${f} 0,0,0 0,${-d} l${-c},0 a${e},${f} 0,0,0 0,${d} l${c},0`,"createOuterCylinderPathD"),bC=(0,g.__name)((a,b,c,d,e,f)=>`M${a+c/2},${-d/2} a${e},${f} 0,0,0 0,${d}`,"createInnerCylinderPathD");async function bD(a,b){let d,{labelStyles:f,nodeStyles:g}=(0,c.styles2String)(b);b.labelStyle=f;let{shapeSvg:h,bbox:i,label:j,halfPadding:k}=await ab(a,b,ae(b)),l="neo"===b.look?2*k:k,m=i.height+l,n=m/2,o=n/(2.5+m/50),p=i.width+o+l,{cssStyles:q}=b;if("handDrawn"===b.look){let a=aa.svg(h),e=bB(0,0,p,m,o,n),f=bC(0,0,p,m,o,n),g=a.path(e,(0,c.userNodeOverrides)(b,{})),i=a.path(f,(0,c.userNodeOverrides)(b,{fill:"none"}));d=h.insert(()=>i,":first-child"),(d=h.insert(()=>g,":first-child")).attr("class","basic label-container"),q&&d.attr("style",q)}else{let a=bA(0,0,p,m,o,n);(d=h.insert("path",":first-child").attr("d",a).attr("class","basic label-container").attr("style",(0,e.handleUndefinedAttr)(q)).attr("style",g)).attr("class","basic label-container"),q&&d.selectAll("path").attr("style",q),g&&d.selectAll("path").attr("style",g)}return d.attr("label-offset-x",o),d.attr("transform",`translate(${-p/2}, ${m/2} )`),j.attr("transform",`translate(${-(i.width/2)-o-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),ad(b,d),b.intersect=function(a){let c=ai(b,a),d=c.y-(b.y??0);if(0!=n&&(Math.abs(d)<(b.height??0)/2||Math.abs(d)==(b.height??0)/2&&Math.abs(c.x-(b.x??0))>(b.width??0)/2-o)){let e=o*o*(1-d*d/(n*n));0!=e&&(e=Math.sqrt(Math.abs(e))),e=o-e,a.x-(b.x??0)>0&&(e=-e),c.x+=e}return c},h}async function bE(a,b){let d,{labelStyles:e,nodeStyles:f}=(0,c.styles2String)(b);b.labelStyle=e;let{shapeSvg:g,bbox:h}=await ab(a,b,ae(b)),i=h.width+b.padding,j=h.height+b.padding,k=[{x:-3*j/6,y:0},{x:i+3*j/6,y:0},{x:i,y:-j},{x:0,y:-j}],{cssStyles:l}=b;if("handDrawn"===b.look){let a=aa.svg(g),e=(0,c.userNodeOverrides)(b,{}),f=af(k),h=a.path(f,e);d=g.insert(()=>h,":first-child").attr("transform",`translate(${-i/2}, ${j/2})`),l&&d.attr("style",l)}else d=aD(g,i,j,k);return f&&d.attr("style",f),b.width=i,b.height=j,ad(b,d),b.intersect=function(a){return az(b,k,a)},g}async function bF(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g}=await ab(a,b,ae(b)),h=Math.max(60,g.width+(b.padding??0)*2,b?.width??0),i=Math.max(20,g.height+(b.padding??0)*2,b?.height??0),{cssStyles:j}=b,k=aa.svg(f),l=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(l.roughness=0,l.fillStyle="solid");let m=[{x:-h/2*.8,y:-i/2},{x:h/2*.8,y:-i/2},{x:h/2,y:-i/2*.6},{x:h/2,y:i/2},{x:-h/2,y:i/2},{x:-h/2,y:-i/2*.6}],n=af(m),o=k.path(n,l),p=f.insert(()=>o,":first-child");return p.attr("class","basic label-container"),j&&"handDrawn"!==b.look&&p.selectChildren("path").attr("style",j),e&&"handDrawn"!==b.look&&p.selectChildren("path").attr("style",e),ad(b,p),b.intersect=function(a){return az(b,m,a)},f}async function bG(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:h,bbox:i,label:j}=await ab(a,b,ae(b)),k=(0,f.evaluate)((0,f.getConfig2)().flowchart?.htmlLabels),l=i.width+(b.padding??0),m=l+i.height,n=l+i.height,o=[{x:0,y:0},{x:n,y:0},{x:n/2,y:-m}],{cssStyles:p}=b,q=aa.svg(h),r=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(r.roughness=0,r.fillStyle="solid");let s=af(o),t=q.path(s,r),u=h.insert(()=>t,":first-child").attr("transform",`translate(${-m/2}, ${m/2})`);return p&&"handDrawn"!==b.look&&u.selectChildren("path").attr("style",p),e&&"handDrawn"!==b.look&&u.selectChildren("path").attr("style",e),b.width=l,b.height=m,ad(b,u),j.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${m/2-(i.height+(b.padding??0)/(k?2:1)-(i.y-(i.top??0)))})`),b.intersect=function(a){return g.log.info("Triangle intersect",b,o,a),az(b,o,a)},h}async function bH(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,label:h}=await ab(a,b,ae(b)),i=Math.max(g.width+(b.padding??0)*2,b?.width??0),j=Math.max(g.height+(b.padding??0)*2,b?.height??0),k=j/8,l=j+k,{cssStyles:m}=b,n=70-i,o=n>0?n/2:0,p=aa.svg(f),q=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(q.roughness=0,q.fillStyle="solid");let r=[{x:-i/2-o,y:l/2},...ag(-i/2-o,l/2,i/2+o,l/2,k,.8),{x:i/2+o,y:-l/2},{x:-i/2-o,y:-l/2}],s=af(r),t=p.path(s,q),u=f.insert(()=>t,":first-child");return u.attr("class","basic label-container"),m&&"handDrawn"!==b.look&&u.selectAll("path").attr("style",m),e&&"handDrawn"!==b.look&&u.selectAll("path").attr("style",e),u.attr("transform",`translate(0,${-k/2})`),h.attr("transform",`translate(${-i/2+(b.padding??0)-(g.x-(g.left??0))},${-j/2+(b.padding??0)-k-(g.y-(g.top??0))})`),ad(b,u),b.intersect=function(a){return az(b,r,a)},f}async function bI(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g}=await ab(a,b,ae(b)),h=Math.max(g.width+(b.padding??0)*2,b?.width??0),i=Math.max(g.height+(b.padding??0)*2,b?.height??0),j=h/i,k=h,l=i;k>l*j?l=k/j:k=l*j,k=Math.max(k,100);let m=Math.min(.2*(l=Math.max(l,50)),l/4),n=l+2*m,{cssStyles:o}=b,p=aa.svg(f),q=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(q.roughness=0,q.fillStyle="solid");let r=[{x:-k/2,y:n/2},...ag(-k/2,n/2,k/2,n/2,m,1),{x:k/2,y:-n/2},...ag(k/2,-n/2,-k/2,-n/2,m,-1)],s=af(r),t=p.path(s,q),u=f.insert(()=>t,":first-child");return u.attr("class","basic label-container"),o&&"handDrawn"!==b.look&&u.selectAll("path").attr("style",o),e&&"handDrawn"!==b.look&&u.selectAll("path").attr("style",e),ad(b,u),b.intersect=function(a){return az(b,r,a)},f}async function bJ(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,label:h}=await ab(a,b,ae(b)),i=Math.max(g.width+(b.padding??0)*2,b?.width??0),j=Math.max(g.height+(b.padding??0)*2,b?.height??0),k=-i/2,l=-j/2,{cssStyles:m}=b,n=aa.svg(f),o=(0,c.userNodeOverrides)(b,{}),p=[{x:k-5,y:l-5},{x:k-5,y:l+j},{x:k+i,y:l+j},{x:k+i,y:l-5}],q=`M${k-5},${l-5} L${k+i},${l-5} L${k+i},${l+j} L${k-5},${l+j} L${k-5},${l-5}
                M${k-5},${l} L${k+i},${l}
                M${k},${l-5} L${k},${l+j}`;"handDrawn"!==b.look&&(o.roughness=0,o.fillStyle="solid");let r=n.path(q,o),s=f.insert(()=>r,":first-child");return s.attr("transform","translate(2.5, 2.5)"),s.attr("class","basic label-container"),m&&"handDrawn"!==b.look&&s.selectAll("path").attr("style",m),e&&"handDrawn"!==b.look&&s.selectAll("path").attr("style",e),h.attr("transform",`translate(${-(g.width/2)+2.5-(g.x-(g.left??0))}, ${-(g.height/2)+2.5-(g.y-(g.top??0))})`),ad(b,s),b.intersect=function(a){return az(b,p,a)},f}async function bK(a,b){if(b.alias&&(b.label=b.alias),"handDrawn"===b.look){let{themeVariables:c}=(0,f.getConfig)(),{background:d}=c,e={...b,id:b.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${d}`]};await bK(a,e)}let d=(0,f.getConfig)();b.useHtmlLabels=d.htmlLabels;let g=d.er?.diagramPadding??10,i=d.er?.entityPadding??6,{cssStyles:j}=b,{labelStyles:k,nodeStyles:l}=(0,c.styles2String)(b);if(0===b.attributes.length&&b.label){let c={rx:0,ry:0,labelPaddingX:g,labelPaddingY:1.5*g,classes:""};(0,e.calculateTextWidth)(b.label,d)+2*c.labelPaddingX<d.er.minEntityWidth&&(b.width=d.er.minEntityWidth);let h=await a6(a,b,c);if(!(0,f.evaluate)(d.htmlLabels)){let a=h.select("text"),b=a.node()?.getBBox();a.attr("transform",`translate(${-b.width/2}, 0)`)}return h}d.htmlLabels||(g*=1.25,i*=1.25);let m=ae(b);m||(m="node default");let n=a.insert("g").attr("class",m).attr("id",b.domId||b.id),o=await bL(n,b.label??"",d,0,0,["name"],k);o.height+=i;let p=0,q=[],r=[],s=0,t=0,u=0,v=0,w=!0,x=!0;for(let a of b.attributes){let b=await bL(n,a.type,d,0,p,["attribute-type"],k);s=Math.max(s,b.width+g);let c=await bL(n,a.name,d,0,p,["attribute-name"],k);t=Math.max(t,c.width+g);let e=await bL(n,a.keys.join(),d,0,p,["attribute-keys"],k);u=Math.max(u,e.width+g);let f=await bL(n,a.comment,d,0,p,["attribute-comment"],k);v=Math.max(v,f.width+g);let h=Math.max(b.height,c.height,e.height,f.height)+i;r.push({yOffset:p,rowHeight:h}),p+=h}let y=4;u<=g&&(w=!1,u=0,y--),v<=g&&(x=!1,v=0,y--);let z=n.node().getBBox();if(o.width+2*g-(s+t+u+v)>0){let a=o.width+2*g-(s+t+u+v);s+=a/y,t+=a/y,u>0&&(u+=a/y),v>0&&(v+=a/y)}let A=s+t+u+v,B=aa.svg(n),C=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(C.roughness=0,C.fillStyle="solid");let D=0;r.length>0&&(D=r.reduce((a,b)=>a+(b?.rowHeight??0),0));let E=Math.max(z.width+2*g,b?.width||0,A),F=Math.max((D??0)+o.height,b?.height||0),G=-E/2,H=-F/2;n.selectAll("g:not(:first-child)").each((a,b,c)=>{let d=(0,h.select)(c[b]),e=d.attr("transform"),f=0,j=0;if(e){let a=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(e);a&&(f=parseFloat(a[1]),j=parseFloat(a[2]),d.attr("class").includes("attribute-name")?f+=s:d.attr("class").includes("attribute-keys")?f+=s+t:d.attr("class").includes("attribute-comment")&&(f+=s+t+u))}d.attr("transform",`translate(${G+g/2+f}, ${j+H+o.height+i/2})`)}),n.select(".name").attr("transform","translate("+-o.width/2+", "+(H+i/2)+")");let I=B.rectangle(G,H,E,F,C),J=n.insert(()=>I,":first-child").attr("style",j.join("")),{themeVariables:K}=(0,f.getConfig)(),{rowEven:L,rowOdd:M,nodeBorder:N}=K;for(let[a,b]of(q.push(0),r.entries())){let c=(a+1)%2==0&&0!==b.yOffset,d=B.rectangle(G,o.height+H+b?.yOffset,E,b?.rowHeight,{...C,fill:c?L:M,stroke:N});n.insert(()=>d,"g.label").attr("style",j.join("")).attr("class",`row-rect-${c?"even":"odd"}`)}let O=B.line(G,o.height+H,E+G,o.height+H,C);for(let a of(n.insert(()=>O).attr("class","divider"),O=B.line(s+G,o.height+H,s+G,F+H,C),n.insert(()=>O).attr("class","divider"),w&&(O=B.line(s+t+G,o.height+H,s+t+G,F+H,C),n.insert(()=>O).attr("class","divider")),x&&(O=B.line(s+t+u+G,o.height+H,s+t+u+G,F+H,C),n.insert(()=>O).attr("class","divider")),q))O=B.line(G,o.height+H+a,E+G,o.height+H+a,C),n.insert(()=>O).attr("class","divider");if(ad(b,J),l&&"handDrawn"!==b.look){let a=l.split(";"),b=a?.filter(a=>a.includes("stroke"))?.map(a=>`${a}`).join("; ");n.selectAll("path").attr("style",b??""),n.selectAll(".row-rect-even path").attr("style",l)}return b.intersect=function(a){return ai(b,a)},n}async function bL(a,b,c,g=0,i=0,j=[],k=""){let l=a.insert("g").attr("class",`label ${j.join(" ")}`).attr("transform",`translate(${g}, ${i})`).attr("style",k);b!==(0,f.parseGenericTypes)(b)&&(b=(b=(0,f.parseGenericTypes)(b)).replaceAll("<","&lt;").replaceAll(">","&gt;"));let m=l.node().appendChild(await (0,d.createText)(l,b,{width:(0,e.calculateTextWidth)(b,c)+100,style:k,useHtmlLabels:c.htmlLabels},c));if(b.includes("&lt;")||b.includes("&gt;")){let a=m.children[0];for(a.textContent=a.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");a.childNodes[0];)(a=a.childNodes[0]).textContent=a.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let n=m.getBBox();if((0,f.evaluate)(c.htmlLabels)){let a=m.children[0];a.style.textAlign="start";let b=(0,h.select)(m);n=a.getBoundingClientRect(),b.attr("width",n.width),b.attr("height",n.height)}return n}async function bM(a,b,c,d,e=c.class.padding??12){let f=3*!d,g=a.insert("g").attr("class",ae(b)).attr("id",b.domId||b.id),h=null,i=null,j=null,k=null,l=0,m=0,n=0;if(h=g.insert("g").attr("class","annotation-group text"),b.annotations.length>0){let a=b.annotations[0];await bN(h,{text:`\xab${a}\xbb`},0),l=h.node().getBBox().height}i=g.insert("g").attr("class","label-group text"),await bN(i,b,0,["font-weight: bolder"]);let o=i.node().getBBox();m=o.height,j=g.insert("g").attr("class","members-group text");let p=0;for(let a of b.members){let b=await bN(j,a,p,[a.parseClassifier()]);p+=b+f}(n=j.node().getBBox().height)<=0&&(n=e/2),k=g.insert("g").attr("class","methods-group text");let q=0;for(let a of b.methods){let b=await bN(k,a,q,[a.parseClassifier()]);q+=b+f}let r=g.node().getBBox();if(null!==h){let a=h.node().getBBox();h.attr("transform",`translate(${-a.width/2})`)}return i.attr("transform",`translate(${-o.width/2}, ${l})`),r=g.node().getBBox(),j.attr("transform",`translate(0, ${l+m+2*e})`),r=g.node().getBBox(),k.attr("transform",`translate(0, ${l+m+(n?n+4*e:2*e)})`),r=g.node().getBBox(),{shapeSvg:g,bbox:r}}async function bN(a,b,c,i=[]){let j,k=a.insert("g").attr("class","label").attr("style",i.join("; ")),l=(0,f.getConfig)(),m="useHtmlLabels"in b?b.useHtmlLabels:(0,f.evaluate)(l.htmlLabels)??!0,n="";n="text"in b?b.text:b.label,!m&&n.startsWith("\\")&&(n=n.substring(1)),(0,f.hasKatex)(n)&&(m=!0);let o=await (0,d.createText)(k,(0,f.sanitizeText2)((0,e.decodeEntities)(n)),{width:(0,e.calculateTextWidth)(n,l)+50,classes:"markdown-node-label",useHtmlLabels:m},l),p=1;if(m){let a=o.children[0],b=(0,h.select)(o);p=a.innerHTML.split("<br>").length,a.innerHTML.includes("</math>")&&(p+=a.innerHTML.split("<mrow>").length-1);let c=a.getElementsByTagName("img");if(c){let a=""===n.replace(/<img[^>]*>/g,"").trim();await Promise.all([...c].map(b=>new Promise(c=>{function d(){if(b.style.display="flex",b.style.flexDirection="column",a){let a=5*parseInt(l.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,10)+"px";b.style.minWidth=a,b.style.maxWidth=a}else b.style.width="100%";c(b)}(0,g.__name)(d,"setupImage"),setTimeout(()=>{b.complete&&d()}),b.addEventListener("error",d),b.addEventListener("load",d)})))}j=a.getBoundingClientRect(),b.attr("width",j.width),b.attr("height",j.height)}else{i.includes("font-weight: bolder")&&(0,h.select)(o).selectAll("tspan").attr("font-weight",""),p=o.children.length;let a=o.children[0];(""===o.textContent||o.textContent.includes("&gt"))&&(a.textContent=n[0]+n.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim()," "===n[1]&&(a.textContent=a.textContent[0]+" "+a.textContent.substring(1))),"undefined"===a.textContent&&(a.textContent=""),j=o.getBBox()}return k.attr("transform","translate(0,"+(-j.height/(2*p)+c)+")"),j.height}async function bO(a,b){let d=(0,f.getConfig2)(),e=d.class.padding??12,g=b.useHtmlLabels??(0,f.evaluate)(d.htmlLabels)??!0;b.annotations=b.annotations??[],b.members=b.members??[],b.methods=b.methods??[];let{shapeSvg:i,bbox:j}=await bM(a,b,d,g,e),{labelStyles:k,nodeStyles:l}=(0,c.styles2String)(b);b.labelStyle=k,b.cssStyles=b.styles||"";let m=b.styles?.join(";")||l||"";b.cssStyles||(b.cssStyles=m.replaceAll("!important","").split(";"));let n=0===b.members.length&&0===b.methods.length&&!d.class?.hideEmptyMembersBox,o=aa.svg(i),p=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(p.roughness=0,p.fillStyle="solid");let q=j.width,r=j.height;0===b.members.length&&0===b.methods.length?r+=e:b.members.length>0&&0===b.methods.length&&(r+=2*e);let s=-q/2,t=-r/2,u=o.rectangle(s-e,t-e-(n?e:0===b.members.length&&0===b.methods.length?-e/2:0),q+2*e,r+2*e+(n?2*e:0===b.members.length&&0===b.methods.length?-e:0),p),v=i.insert(()=>u,":first-child");v.attr("class","basic label-container");let w=v.node().getBBox();i.selectAll(".text").each((a,c,d)=>{let f=(0,h.select)(d[c]),j=f.attr("transform"),k=0;if(j){let a=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(j);a&&(k=parseFloat(a[2]))}let l=k+t+e-(n?e:0===b.members.length&&0===b.methods.length?-e/2:0);g||(l-=4);let m=s;(f.attr("class").includes("label-group")||f.attr("class").includes("annotation-group"))&&(m=-f.node()?.getBBox().width/2||0,i.selectAll("text").each(function(a,b,c){"middle"===window.getComputedStyle(c[b]).textAnchor&&(m=0)})),f.attr("transform",`translate(${m}, ${l})`)});let x=i.select(".annotation-group").node().getBBox().height-(n?e/2:0)||0,y=i.select(".label-group").node().getBBox().height-(n?e/2:0)||0,z=i.select(".members-group").node().getBBox().height-(n?e/2:0)||0;if(b.members.length>0||b.methods.length>0||n){let a=o.line(w.x,x+y+t+e,w.x+w.width,x+y+t+e,p);i.insert(()=>a).attr("class","divider").attr("style",m)}if(n||b.members.length>0||b.methods.length>0){let a=o.line(w.x,x+y+z+t+2*e+e,w.x+w.width,x+y+z+t+e+2*e,p);i.insert(()=>a).attr("class","divider").attr("style",m)}if("handDrawn"!==b.look&&i.selectAll("path").attr("style",m),v.select(":nth-child(2)").attr("style",m),i.selectAll(".divider").select("path").attr("style",m),b.labelStyle?i.selectAll("span").attr("style",b.labelStyle):i.selectAll("span").attr("style",m),!g){let a=RegExp(/color\s*:\s*([^;]*)/),b=a.exec(m);if(b){let a=b[0].replace("color","fill");i.selectAll("tspan").attr("style",a)}else if(k){let b=a.exec(k);if(b){let a=b[0].replace("color","fill");i.selectAll("tspan").attr("style",a)}}}return ad(b,v),b.intersect=function(a){return ai(b,a)},i}async function bP(a,b){let d,{labelStyles:e,nodeStyles:f}=(0,c.styles2String)(b);b.labelStyle=e;let g="verifyMethod"in b,i=ae(b),j=a.insert("g").attr("class",i).attr("id",b.domId??b.id),k=d=g?await bQ(j,`&lt;&lt;${b.type}&gt;&gt;`,0,b.labelStyle):await bQ(j,"&lt;&lt;Element&gt;&gt;",0,b.labelStyle),l=await bQ(j,b.name,k,b.labelStyle+"; font-weight: bold;");if(k+=l+20,g){let a=await bQ(j,`${b.requirementId?`ID: ${b.requirementId}`:""}`,k,b.labelStyle);k+=a;let c=await bQ(j,`${b.text?`Text: ${b.text}`:""}`,k,b.labelStyle);k+=c;let d=await bQ(j,`${b.risk?`Risk: ${b.risk}`:""}`,k,b.labelStyle);k+=d,await bQ(j,`${b.verifyMethod?`Verification: ${b.verifyMethod}`:""}`,k,b.labelStyle)}else{let a=await bQ(j,`${b.type?`Type: ${b.type}`:""}`,k,b.labelStyle);k+=a,await bQ(j,`${b.docRef?`Doc Ref: ${b.docRef}`:""}`,k,b.labelStyle)}let m=(j.node()?.getBBox().width??200)+20,n=(j.node()?.getBBox().height??200)+20,o=-m/2,p=-n/2,q=aa.svg(j),r=(0,c.userNodeOverrides)(b,{});"handDrawn"!==b.look&&(r.roughness=0,r.fillStyle="solid");let s=q.rectangle(o,p,m,n,r),t=j.insert(()=>s,":first-child");if(t.attr("class","basic label-container").attr("style",f),j.selectAll(".label").each((a,b,c)=>{let d=(0,h.select)(c[b]),e=d.attr("transform"),f=0,g=0;if(e){let a=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(e);a&&(f=parseFloat(a[1]),g=parseFloat(a[2]))}let i=g-n/2,j=o+10;(0===b||1===b)&&(j=f),d.attr("transform",`translate(${j}, ${i+20})`)}),k>d+l+20){let a=q.line(o,p+d+l+20,o+m,p+d+l+20,r);j.insert(()=>a).attr("style",f)}return ad(b,t),b.intersect=function(a){return ai(b,a)},j}async function bQ(a,b,c,g=""){let i;if(""===b)return 0;let j=a.insert("g").attr("class","label").attr("style",g),k=(0,f.getConfig2)(),l=k.htmlLabels??!0,m=await (0,d.createText)(j,(0,f.sanitizeText2)((0,e.decodeEntities)(b)),{width:(0,e.calculateTextWidth)(b,k)+50,classes:"markdown-node-label",useHtmlLabels:l,style:g},k);if(l){let a=m.children[0],b=(0,h.select)(m);i=a.getBoundingClientRect(),b.attr("width",i.width),b.attr("height",i.height)}else{for(let a of m.children[0].children)a.textContent=a.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),g&&a.setAttribute("style",g);i=m.getBBox(),i.height+=6}return j.attr("transform",`translate(${-i.width/2},${-i.height/2+c})`),i.height}(0,g.__name)(bD,"tiltedCylinder"),(0,g.__name)(bE,"trapezoid"),(0,g.__name)(bF,"trapezoidalPentagon"),(0,g.__name)(bG,"triangle"),(0,g.__name)(bH,"waveEdgedRectangle"),(0,g.__name)(bI,"waveRectangle"),(0,g.__name)(bJ,"windowPane"),(0,g.__name)(bK,"erBox"),(0,g.__name)(bL,"addText"),(0,g.__name)(bM,"textHelper"),(0,g.__name)(bN,"addText"),(0,g.__name)(bO,"classBox"),(0,g.__name)(bP,"requirementBox"),(0,g.__name)(bQ,"addText");var bR=(0,g.__name)(a=>{switch(a){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function bS(a,b,{config:d}){let e,f,g,h,{labelStyles:i,nodeStyles:j}=(0,c.styles2String)(b);b.labelStyle=i||"";let k=b.width;b.width=(b.width??200)-10;let{shapeSvg:l,bbox:m,label:n}=await ab(a,b,ae(b)),o=b.padding||10,p="";"ticket"in b&&b.ticket&&d?.kanban?.ticketBaseUrl&&(p=d?.kanban?.ticketBaseUrl.replace("#TICKET#",b.ticket),e=l.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",p).attr("target","_blank"));let q={useHtmlLabels:b.useHtmlLabels,labelStyle:b.labelStyle||"",width:b.width,img:b.img,padding:b.padding||8,centerLabel:!1};e?{label:f,bbox:g}=await ac(e,"ticket"in b&&b.ticket||"",q):{label:f,bbox:g}=await ac(l,"ticket"in b&&b.ticket||"",q);let{label:r,bbox:s}=await ac(l,"assigned"in b&&b.assigned||"",q);b.width=k;let t=b?.width||0,u=Math.max(g.height,s.height)/2,v=Math.max(m.height+20,b?.height||0)+u,w=-t/2,x=-v/2;n.attr("transform","translate("+(o-t/2)+", "+(-u-m.height/2)+")"),f.attr("transform","translate("+(o-t/2)+", "+(-u+m.height/2)+")"),r.attr("transform","translate("+(o+t/2-s.width-20)+", "+(-u+m.height/2)+")");let{rx:y,ry:z}=b,{cssStyles:A}=b;if("handDrawn"===b.look){let a=aa.svg(l),d=(0,c.userNodeOverrides)(b,{}),e=y||z?a.path(am(w,x,t,v,y||0),d):a.rectangle(w,x,t,v,d);(h=l.insert(()=>e,":first-child")).attr("class","basic label-container").attr("style",A||null)}else{(h=l.insert("rect",":first-child")).attr("class","basic label-container __APA__").attr("style",j).attr("rx",y??5).attr("ry",z??5).attr("x",w).attr("y",x).attr("width",t).attr("height",v);let a="priority"in b&&b.priority;if(a){let b=l.append("line"),c=w+2,d=x+Math.floor((y??0)/2),e=x+v-Math.floor((y??0)/2);b.attr("x1",c).attr("y1",d).attr("x2",c).attr("y2",e).attr("stroke-width","4").attr("stroke",bR(a))}}return ad(b,h),b.height=v,b.intersect=function(a){return ai(b,a)},l}async function bT(a,b){let d,{labelStyles:f,nodeStyles:h}=(0,c.styles2String)(b);b.labelStyle=f;let{shapeSvg:i,bbox:j,halfPadding:k,label:l}=await ab(a,b,ae(b)),m=j.width+10*k,n=j.height+8*k,o=.15*m,{cssStyles:p}=b,q=j.width+20,r=j.height+20,s=Math.max(m,q),t=Math.max(n,r);l.attr("transform",`translate(${-j.width/2}, ${-j.height/2})`);let u=`M0 0 
    a${o},${o} 1 0,0 ${.25*s},${-1*t*.1}
    a${o},${o} 1 0,0 ${.25*s},0
    a${o},${o} 1 0,0 ${.25*s},0
    a${o},${o} 1 0,0 ${.25*s},${.1*t}

    a${o},${o} 1 0,0 ${.15*s},${.33*t}
    a${.8*o},${.8*o} 1 0,0 0,${.34*t}
    a${o},${o} 1 0,0 ${-1*s*.15},${.33*t}

    a${o},${o} 1 0,0 ${-1*s*.25},${.15*t}
    a${o},${o} 1 0,0 ${-1*s*.25},0
    a${o},${o} 1 0,0 ${-1*s*.25},0
    a${o},${o} 1 0,0 ${-1*s*.25},${-1*t*.15}

    a${o},${o} 1 0,0 ${-1*s*.1},${-1*t*.33}
    a${.8*o},${.8*o} 1 0,0 0,${-1*t*.34}
    a${o},${o} 1 0,0 ${.1*s},${-1*t*.33}
  H0 V0 Z`;if("handDrawn"===b.look){let a=aa.svg(i),f=(0,c.userNodeOverrides)(b,{}),g=a.path(u,f);(d=i.insert(()=>g,":first-child")).attr("class","basic label-container").attr("style",(0,e.handleUndefinedAttr)(p))}else d=i.insert("path",":first-child").attr("class","basic label-container").attr("style",h).attr("d",u);return d.attr("transform",`translate(${-s/2}, ${-t/2})`),ad(b,d),b.calcIntersect=function(a,b){return ai(a,b)},b.intersect=function(a){return g.log.info("Bang intersect",b,a),ai(b,a)},i}async function bU(a,b){let d,{labelStyles:f,nodeStyles:h}=(0,c.styles2String)(b);b.labelStyle=f;let{shapeSvg:i,bbox:j,halfPadding:k,label:l}=await ab(a,b,ae(b)),m=j.width+2*k,n=j.height+2*k,o=.15*m,p=.25*m,q=.35*m,r=.2*m,{cssStyles:s}=b,t=`M0 0 
    a${o},${o} 0 0,1 ${.25*m},${-1*m*.1}
    a${q},${q} 1 0,1 ${.4*m},${-1*m*.1}
    a${p},${p} 1 0,1 ${.35*m},${.2*m}

    a${o},${o} 1 0,1 ${.15*m},${.35*n}
    a${r},${r} 1 0,1 ${-1*m*.15},${.65*n}

    a${p},${o} 1 0,1 ${-1*m*.25},${.15*m}
    a${q},${q} 1 0,1 ${-1*m*.5},0
    a${o},${o} 1 0,1 ${-1*m*.25},${-1*m*.15}

    a${o},${o} 1 0,1 ${-1*m*.1},${-1*n*.35}
    a${r},${r} 1 0,1 ${.1*m},${-1*n*.65}
  H0 V0 Z`;if("handDrawn"===b.look){let a=aa.svg(i),f=(0,c.userNodeOverrides)(b,{}),g=a.path(t,f);(d=i.insert(()=>g,":first-child")).attr("class","basic label-container").attr("style",(0,e.handleUndefinedAttr)(s))}else d=i.insert("path",":first-child").attr("class","basic label-container").attr("style",h).attr("d",t);return l.attr("transform",`translate(${-j.width/2}, ${-j.height/2})`),d.attr("transform",`translate(${-m/2}, ${-n/2})`),ad(b,d),b.calcIntersect=function(a,b){return ai(a,b)},b.intersect=function(a){return g.log.info("Cloud intersect",b,a),ai(b,a)},i}async function bV(a,b){let{labelStyles:d,nodeStyles:e}=(0,c.styles2String)(b);b.labelStyle=d;let{shapeSvg:f,bbox:g,halfPadding:h,label:i}=await ab(a,b,ae(b)),j=g.width+8*h,k=g.height+2*h,l=`
    M${-j/2} ${k/2-5}
    v${-k+10}
    q0,-5 5,-5
    h${j-10}
    q5,0 5,5
    v${k-10}
    q0,5 -5,5
    h${-j+10}
    q-5,0 -5,-5
    Z
  `,m=f.append("path").attr("id","node-"+b.id).attr("class","node-bkg node-"+b.type).attr("style",e).attr("d",l);return f.append("line").attr("class","node-line-").attr("x1",-j/2).attr("y1",k/2).attr("x2",j/2).attr("y2",k/2),i.attr("transform",`translate(${-g.width/2}, ${-g.height/2})`),f.append(()=>i.node()),ad(b,m),b.calcIntersect=function(a,b){return ai(a,b)},b.intersect=function(a){return ai(b,a)},f}async function bW(a,b){let c={padding:b.padding??0};return aG(a,b,c)}(0,g.__name)(bS,"kanbanItem"),(0,g.__name)(bT,"bang"),(0,g.__name)(bU,"cloud"),(0,g.__name)(bV,"defaultMindmapNode"),(0,g.__name)(bW,"mindmapCircle");var bX=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:br},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:bo},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:bs},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:bw},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:aT},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:aG},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:bT},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:bU},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:bk},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:a$},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:a9},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:a8},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:bE},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:a5},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:aV},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:bz},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:aE},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:bp},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:bv},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:bu},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:aY},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:a_},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:aK},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:aM},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:aO},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:ba},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:bH},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:aZ},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:bD},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:be},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:aP},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:aU},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:bG},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:bJ},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:aW},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:bF},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:aX},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:bq},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:bh},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:bg},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:aC},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:aI},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:by},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:bx},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:bI},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:bl},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:bf}],bY=(0,g.__name)(()=>Object.fromEntries([...Object.entries({state:bt,choice:aF,note:bi,rectWithTitle:bm,labelRect:a7,iconSquare:a3,iconCircle:a1,icon:a0,iconRounded:a2,imageSquare:a4,anchor:aA,kanbanItem:bS,mindmapCircle:bW,defaultMindmapNode:bV,classBox:bO,erBox:bK,requirementBox:bP}),...bX.flatMap(a=>[a.shortName,..."aliases"in a?a.aliases:[],..."internalAliases"in a?a.internalAliases:[]].map(b=>[b,a.handler]))]),"generateShapeMap")();function bZ(a){return a in bY}(0,g.__name)(bZ,"isValidShape");var b$=new Map;async function b_(a,b,c){let d,e;"rect"===b.shape&&(b.rx&&b.ry?b.shape="roundedRect":b.shape="squareRect");let f=b.shape?bY[b.shape]:void 0;if(!f)throw Error(`No such shape: ${b.shape}. Please check your syntax.`);if(b.link){let g;"sandbox"===c.config.securityLevel?g="_top":b.linkTarget&&(g=b.linkTarget||"_blank"),d=a.insert("svg:a").attr("xlink:href",b.link).attr("target",g??null),e=await f(d,b,c)}else d=e=await f(a,b,c);return b.tooltip&&e.attr("title",b.tooltip),b$.set(b.id,d),b.haveCallback&&d.attr("class",d.attr("class")+" clickable"),d}(0,g.__name)(b_,"insertNode");var b0=(0,g.__name)((a,b)=>{b$.set(b.id,a)},"setNodeElem"),b1=(0,g.__name)(()=>{b$.clear()},"clear"),b2=(0,g.__name)(a=>{let b=b$.get(a.id);g.log.trace("Transforming node",a.diff,a,"translate("+(a.x-a.width/2-5)+", "+a.width/2+")");let c=a.diff||0;return a.clusterNode?b.attr("transform","translate("+(a.x+c-a.width/2)+", "+(a.y-a.height/2-8)+")"):b.attr("transform","translate("+a.x+", "+a.y+")"),c},"positionNode");a.s(["clear",()=>au,"clear2",()=>b1,"createLabel_default",()=>al,"insertCluster",()=>at,"insertNode",()=>b_,"isValidShape",()=>bZ,"labelHelper",()=>ab,"positionNode",()=>b2,"setNodeElem",()=>b0,"updateNodeBounds",()=>ad],10473)}];

//# sourceMappingURL=2d2f0_mermaid_dist_chunks_mermaid_core_chunk-JZLCHNYA_mjs_4c3bae8d._.js.map